(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{100:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return a})),n.d(t,"metadata",(function(){return l})),n.d(t,"toc",(function(){return c})),n.d(t,"default",(function(){return u}));var r=n(3),o=n(7),i=(n(0),n(128)),a={slug:"installation/prerequisites",title:"Prerequisites"},l={unversionedId:"inst-prerequisites",id:"inst-prerequisites",isDocsHomePage:!1,title:"Prerequisites",description:"1. Working k8s cluster(s)",source:"@site/docs/inst-prerequisites.md",slug:"/installation/prerequisites",permalink:"/docs/installation/prerequisites",editUrl:"https://github.com/redkubes/redkubes/tree/master/docs/inst-prerequisites.md",version:"current",sidebar:"mainSidebar",previous:{title:"Installation Overview",permalink:"/docs/installation/"},next:{title:"Setup",permalink:"/docs/installation/setup"}},c=[{value:"1. Working k8s cluster(s)",id:"1-working-k8s-clusters",children:[]},{value:"2. DNS zone",id:"2-dns-zone",children:[]},{value:"3. Kubectl running",id:"3-kubectl-running",children:[]},{value:"4. Docker running",id:"4-docker-running",children:[]},{value:"5. KMS credentials to manage keys for encryption (optional)",id:"5-kms-credentials-to-manage-keys-for-encryption-optional",children:[]},{value:"6. Pull secret for the API (optional)",id:"6-pull-secret-for-the-api-optional",children:[]}],s={toc:c};function u(e){var t=e.components,n=Object(o.a)(e,["components"]);return Object(i.b)("wrapper",Object(r.a)({},s,n,{components:t,mdxType:"MDXLayout"}),Object(i.b)("h3",{id:"1-working-k8s-clusters"},"1. Working k8s cluster(s)"),Object(i.b)("p",null,"Otomi needs a working kubernetes cluster to deploy on. It supports two versions down from 1.19, so at a minimum 1.17 is required. If you don't have access with kubectl to your cluster, you may have to pull the credentials from the cloud first:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"Azure: ",Object(i.b)("inlineCode",{parentName:"li"},"az aks get-credentials --resource-group $RG --name $CLUSTER_NAME --admin")),Object(i.b)("li",{parentName:"ul"},"AWS: ",Object(i.b)("inlineCode",{parentName:"li"},"aws eks update-kubeconfig --name $CLUSTER_NAME")),Object(i.b)("li",{parentName:"ul"},"Google: ",Object(i.b)("inlineCode",{parentName:"li"},"gcloud container clusters get-credentials $CLUSTER_NAME --region europe-west4 --project xxx"))),Object(i.b)("p",null,"If you are not logged in with the correct credentials then re-login first:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"Azure: ",Object(i.b)("inlineCode",{parentName:"li"},"az login")),Object(i.b)("li",{parentName:"ul"},"AWS: ",Object(i.b)("inlineCode",{parentName:"li"},"aws login eks")),Object(i.b)("li",{parentName:"ul"},"Google: ",Object(i.b)("inlineCode",{parentName:"li"},"gcloud auth login"))),Object(i.b)("h3",{id:"2-dns-zone"},"2. DNS zone"),Object(i.b)("p",null,"Otomi requires credentials that allow to manage DNS zone from one of the following providers: aws/azure/google"),Object(i.b)("h3",{id:"3-kubectl-running"},"3. Kubectl running"),Object(i.b)("p",null,"To be able to target different kube contexts, kubectl needs to be installed."),Object(i.b)("h3",{id:"4-docker-running"},"4. Docker running"),Object(i.b)("p",null,"Otomi runs everything else from containers, so please start docker if you haven't already."),Object(i.b)("h3",{id:"5-kms-credentials-to-manage-keys-for-encryption-optional"},"5. KMS credentials to manage keys for encryption (optional)"),Object(i.b)("p",null,"If you would like the secrets in the values repo to be encrypted, you will have to setup an account with your Key Management Service (KMS) provider. It is needed by ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"https://github.com/mozilla/sops"}),"sops"),", the tool used for encryption by otomi. Please read up there on how to work with sops, as it is out of scope for these docs."),Object(i.b)("h3",{id:"6-pull-secret-for-the-api-optional"},"6. Pull secret for the API (optional)"),Object(i.b)("div",{className:"admonition admonition-info alert alert--info"},Object(i.b)("div",Object(r.a)({parentName:"div"},{className:"admonition-heading"}),Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",Object(r.a)({parentName:"h5"},{className:"admonition-icon"}),Object(i.b)("svg",Object(r.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(i.b)("path",Object(r.a)({parentName:"svg"},{fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"})))),"Otomi Enterprise Edition license needed")),Object(i.b)("div",Object(r.a)({parentName:"div"},{className:"admonition-content"}),Object(i.b)("p",{parentName:"div"},"If you have a license for Otomi EE you can run the api, unlocking self service features."))),Object(i.b)("p",null,"When you have a paid license to use the api you will have a pull secret. Please keep it handy for the ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"setup"}),"setup steps"),"."))}u.isMDXComponent=!0},128:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return m}));var r=n(0),o=n.n(r);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=o.a.createContext({}),u=function(e){var t=o.a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},p=function(e){var t=u(e.components);return o.a.createElement(s.Provider,{value:t},e.children)},b={inlineCode:"code",wrapper:function(e){var t=e.children;return o.a.createElement(o.a.Fragment,{},t)}},d=o.a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,a=e.parentName,s=c(e,["components","mdxType","originalType","parentName"]),p=u(n),d=r,m=p["".concat(a,".").concat(d)]||p[d]||b[d]||i;return n?o.a.createElement(m,l(l({ref:t},s),{},{components:n})):o.a.createElement(m,l({ref:t},s))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,a=new Array(i);a[0]=d;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l.mdxType="string"==typeof e?e:r,a[1]=l;for(var s=2;s<i;s++)a[s]=n[s];return o.a.createElement.apply(null,a)}return o.a.createElement.apply(null,n)}d.displayName="MDXCreateElement"}}]);