"use strict";(self.webpackChunkredkubes_github_io=self.webpackChunkredkubes_github_io||[]).push([[7444],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>d});var r=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var p=r.createContext({}),s=function(e){var t=r.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},u=function(e){var t=s(e.components);return r.createElement(p.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,i=e.mdxType,a=e.originalType,p=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),m=s(n),d=i,k=m["".concat(p,".").concat(d)]||m[d]||c[d]||a;return n?r.createElement(k,o(o({ref:t},u),{},{components:n})):r.createElement(k,o({ref:t},u))}));function d(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var a=n.length,o=new Array(a);o[0]=m;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l.mdxType="string"==typeof e?e:i,o[1]=l;for(var s=2;s<a;s++)o[s]=n[s];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},4453:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>o,default:()=>c,frontMatter:()=>a,metadata:()=>l,toc:()=>s});var r=n(7462),i=(n(7294),n(3905));const a={slug:"tekton",title:"Tekton",sidebar_label:"Tekton"},o=void 0,l={unversionedId:"apps/tekton",id:"apps/tekton",title:"Tekton",description:"Tekton is used in Otomi for the Builds self-service. When a Build is created, Otomi generates the Tekton Pipeline and Pipelinerun resources. There are 2 types op pipelines:",source:"@site/docs/apps/tekton.md",sourceDirName:"apps",slug:"/apps/tekton",permalink:"/docs/apps/tekton",draft:!1,editUrl:"https://github.com/redkubes/redkubes.github.io/tree/main/docs/apps/tekton.md",tags:[],version:"current",frontMatter:{slug:"tekton",title:"Tekton",sidebar_label:"Tekton"},sidebar:"mainSidebar",previous:{title:"Trivy Operator",permalink:"/docs/apps/trivy"},next:{title:"Hashicorp Vault",permalink:"/docs/apps/vault"}},p={},s=[{value:"Automation",id:"automation",level:2},{value:"Instructions",id:"instructions",level:2}],u={toc:s};function c(e){let{components:t,...n}=e;return(0,i.kt)("wrapper",(0,r.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"Tekton is used in Otomi for the Builds self-service. When a Build is created, Otomi generates the Tekton Pipeline and Pipelinerun resources. There are 2 types op pipelines:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Docker for building images based on a Dockerfile"),(0,i.kt)("li",{parentName:"ul"},"Buildpacks for building images using buildpacks")),(0,i.kt)("p",null,"When Tekton is activated, Otomi will add 3 Tekton tasks to the team's namespace:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/tektoncd/catalog/tree/main/task/buildpacks/0.6"},"Buildpacks")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/tektoncd/catalog/tree/main/task/git-clone/0.9"},"git-clone")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/tektoncd/catalog/tree/main/task/kaniko/0.6"},"kaniko"))),(0,i.kt)("p",null,"and use them in the pipelines."),(0,i.kt)("h2",{id:"automation"},"Automation"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"When activated, the Tekton Helm chart will be installed"),(0,i.kt)("li",{parentName:"ul"},"When a team is created and Tekton is active, Tekton tasks used by the pipelines will be added to the team namespace "),(0,i.kt)("li",{parentName:"ul"},"When a build is created, the required pipeline and pipelinerun resources are created")),(0,i.kt)("h2",{id:"instructions"},"Instructions"),(0,i.kt)("p",null,"When Otomi generates the manifest resources for the pipeline and the pipelinerun, the pipelinerun will automatically run the pipeline once. Use the following command to check if the status of the pipelinerun:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"tkn pipelineruns logs  <name-of-the-pipelinerun> -n team-<team name>\n")),(0,i.kt)("p",null,"If the build is changed in Otomi, the pipelinerun will not be re-started. Use the following command to start the pipeline after a change:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"tkn pipeline start <name-of-the-pipeline>  --use-pipelinerun <name-of-the-pipelinerun>  -n team-<team name>\n")))}c.isMDXComponent=!0}}]);