"use strict";(self.webpackChunkredkubes_github_io=self.webpackChunkredkubes_github_io||[]).push([[9637],{3905:(e,t,o)=>{o.d(t,{Zo:()=>u,kt:()=>m});var n=o(7294);function a(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function i(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function r(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?i(Object(o),!0).forEach((function(t){a(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):i(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function l(e,t){if(null==e)return{};var o,n,a=function(e,t){if(null==e)return{};var o,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)o=i[n],t.indexOf(o)>=0||(a[o]=e[o]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)o=i[n],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(a[o]=e[o])}return a}var p=n.createContext({}),s=function(e){var t=n.useContext(p),o=t;return e&&(o="function"==typeof e?e(t):r(r({},t),e)),o},u=function(e){var t=s(e.components);return n.createElement(p.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},c=n.forwardRef((function(e,t){var o=e.components,a=e.mdxType,i=e.originalType,p=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),c=s(o),m=a,h=c["".concat(p,".").concat(m)]||c[m]||d[m]||i;return o?n.createElement(h,r(r({ref:t},u),{},{components:o})):n.createElement(h,r({ref:t},u))}));function m(e,t){var o=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=o.length,r=new Array(i);r[0]=c;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l.mdxType="string"==typeof e?e:a,r[1]=l;for(var s=2;s<i;s++)r[s]=o[s];return n.createElement.apply(null,r)}return n.createElement.apply(null,o)}c.displayName="MDXCreateElement"},8502:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>p,contentTitle:()=>r,default:()=>d,frontMatter:()=>i,metadata:()=>l,toc:()=>s});var n=o(7462),a=(o(7294),o(3905));const i={slug:"activation",title:"Activation steps",sidebar_label:"Activation"},r=void 0,l={unversionedId:"get-started/activation",id:"get-started/activation",title:"Activation steps",description:"Follow the steps below to activate Otomi after initial installation.",source:"@site/docs/get-started/activation.md",sourceDirName:"get-started",slug:"/get-started/activation",permalink:"/docs/get-started/activation",draft:!1,editUrl:"https://github.com/redkubes/redkubes.github.io/tree/main/docs/get-started/activation.md",tags:[],version:"current",frontMatter:{slug:"activation",title:"Activation steps",sidebar_label:"Activation"},sidebar:"mainSidebar",previous:{title:"Installation",permalink:"/docs/get-started/installation"},next:{title:"Get Started Labs",permalink:"/docs/for-devs/get-started/overview"}},p={},s=[{value:"Step 1: Get the log output of the installer job",id:"step-1-get-the-log-output-of-the-installer-job",level:3},{value:"Step 2: Create an API key for using Otomi Console and Otomi API",id:"step-2-create-an-api-key-for-using-otomi-console-and-otomi-api",level:3},{value:"Step 3 (optional): Add the auto generated CA to your keychain",id:"step-3-optional-add-the-auto-generated-ca-to-your-keychain",level:3},{value:"Step 4: Activate Drone",id:"step-4-activate-drone",level:3},{value:"Step 5 (Optional): Create a new admin user",id:"step-5-optional-create-a-new-admin-user",level:3},{value:"Step 6 (Optional): Add the URL of the Kubernetes API",id:"step-6-optional-add-the-url-of-the-kubernetes-api",level:3}],u={toc:s};function d(e){let{components:t,...o}=e;return(0,a.kt)("wrapper",(0,n.Z)({},u,o,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"Follow the steps below to activate Otomi after initial installation."),(0,a.kt)("h3",{id:"step-1-get-the-log-output-of-the-installer-job"},"Step 1: Get the log output of the installer job"),(0,a.kt)("p",null,"When the installer job (in the default namespace) has finished, copy the URL and the generated password from the bottom of the logs, sign in to the console with the provided URL, username and password."),(0,a.kt)("p",null,"Use the following command to get the logs of the installer job:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"kubectl logs jobs/otomi -n default -f\n")),(0,a.kt)("h3",{id:"step-2-create-an-api-key-for-using-otomi-console-and-otomi-api"},"Step 2: Create an API key for using Otomi Console and Otomi API"),(0,a.kt)("p",null,"If you would like to use the Otomi Console (Web UI) and Otomi API (for code validation and creation), then you will first need to create a Community Edition API key in ",(0,a.kt)("a",{parentName:"p",href:"https://portal.otomi.cloud"},"Otomi Cloud"),". Follow these instructions to create an API key:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Go to ",(0,a.kt)("a",{parentName:"li",href:"https://portal.otomi.cloud"},"Otomi Cloud")),(0,a.kt)("li",{parentName:"ul"},"Create an account"),(0,a.kt)("li",{parentName:"ul"},"Click on ",(0,a.kt)("inlineCode",{parentName:"li"},"Register Cluster")),(0,a.kt)("li",{parentName:"ul"},"Agree with the ",(0,a.kt)("a",{parentName:"li",href:"../../product/eula/v1"},"EULA")),(0,a.kt)("li",{parentName:"ul"},"Copy the API Key and click ",(0,a.kt)("inlineCode",{parentName:"li"},"Continue")),(0,a.kt)("li",{parentName:"ul"},"Log in to Otomi Console. You can find the link in the logs of the installer (see step 1)"),(0,a.kt)("li",{parentName:"ul"},"Add the API key to Otomi Console")),(0,a.kt)("h3",{id:"step-3-optional-add-the-auto-generated-ca-to-your-keychain"},"Step 3 (optional): Add the auto generated CA to your keychain"),(0,a.kt)("p",null,"Otomi by default automatically generates a CA. The generated CA is of course not trusted on your local machine. Here are some options to prevent you from clicking away lots of security warning in your browser:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},'In the left menu of the console, click on "Download CA"'),(0,a.kt)("li",{parentName:"ol"},"Double click the downloaded CA.crt or add the CA to your keychain on Mac using the following command:")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"sudo security add-trusted-cert -d -r trustRoot -k /Library/Keychains/System.keychain ~/Downloads/ca.crt\n")),(0,a.kt)("p",null,"On Windows, use PowerShell (running as Administrator) with the Certutil:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-powershell"},"certutil.exe -addstore root <downloaded cert path>\n")),(0,a.kt)("p",null,"Or:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-powershell"},'Import-Certificate -FilePath "<downloaded cert path>" -CertStoreLocation Cert:\\LocalMachine\\Root\n# Restart the browser\n')),(0,a.kt)("p",null,"But you could also run Chrome in insecure mode:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"alias chrome-insecure='/Applications/Google\\ Chrome.app/Contents/MacOS/Google\\ Chrome --ignore-certificate-errors --ignore-urlfetcher-cert-requests &> /dev/null'\n")),(0,a.kt)("ol",{start:3},(0,a.kt)("li",{parentName:"ol"},"Optional: Restart Docker (to support pushing images to Harbor)")),(0,a.kt)("h3",{id:"step-4-activate-drone"},"Step 4: Activate Drone"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://www.drone.io/"},"Drone")," is an integral part in the deployment of Otomi cluster configuration."),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"In the side menu of Otomi Console under ",(0,a.kt)("inlineCode",{parentName:"li"},"platform")," click on the ",(0,a.kt)("strong",{parentName:"li"},"Drone")," app"),(0,a.kt)("li",{parentName:"ol"},"Click on the ",(0,a.kt)("inlineCode",{parentName:"li"},"play")," button in the top right. A new tab will open for Drone"),(0,a.kt)("li",{parentName:"ol"},"Sign in locally with as ",(0,a.kt)("inlineCode",{parentName:"li"},"otomi-admin")," and the password provided in the logs of the installer job."),(0,a.kt)("li",{parentName:"ol"},"Click on ",(0,a.kt)("inlineCode",{parentName:"li"},"Authorize Application")),(0,a.kt)("li",{parentName:"ol"},"Click on `Submit on the Complete your Drone Registration page. You don't need to fill in your Email, Full Name or Company Name if you don't want to"),(0,a.kt)("li",{parentName:"ol"},"Click on the ",(0,a.kt)("inlineCode",{parentName:"li"},"otomi/values")," repository"),(0,a.kt)("li",{parentName:"ol"},"Click on ",(0,a.kt)("inlineCode",{parentName:"li"},"+ Activate Repository"))),(0,a.kt)("h3",{id:"step-5-optional-create-a-new-admin-user"},"Step 5 (Optional): Create a new admin user"),(0,a.kt)("admonition",{title:"ATTENTION",type:"info"},(0,a.kt)("p",{parentName:"admonition"},"We strongly advise to not use the default ",(0,a.kt)("inlineCode",{parentName:"p"},"otomi-admin")," account after activation and to not change the password. Store it somewhere safe and only use it in case absolutely required.")),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"/docs/apps/keycloak#step-2-create-a-user-in-keycloak"},"Create a new user account in Keycloak")," and add the new user to the ",(0,a.kt)("inlineCode",{parentName:"p"},"otomi-admin")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"team-admin"),"."),(0,a.kt)("h3",{id:"step-6-optional-add-the-url-of-the-kubernetes-api"},"Step 6 (Optional): Add the URL of the Kubernetes API"),(0,a.kt)("admonition",{title:"NOTE",type:"info"},(0,a.kt)("p",{parentName:"admonition"},"Adding the URL of the K8s cluster API is required by teams to be able to download the KUBECONFIG")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Under ",(0,a.kt)("inlineCode",{parentName:"li"},"Platform")," in Otomi Console, click on ",(0,a.kt)("inlineCode",{parentName:"li"},"Settings")),(0,a.kt)("li",{parentName:"ul"},"Click on ",(0,a.kt)("inlineCode",{parentName:"li"},"Cluster")),(0,a.kt)("li",{parentName:"ul"},"Add the full URL of the API server"),(0,a.kt)("li",{parentName:"ul"},"Click on ",(0,a.kt)("inlineCode",{parentName:"li"},"Submit")),(0,a.kt)("li",{parentName:"ul"},"Click on ",(0,a.kt)("inlineCode",{parentName:"li"},"Deploy Changes"))))}d.isMDXComponent=!0}}]);