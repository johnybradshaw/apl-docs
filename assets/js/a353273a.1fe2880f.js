"use strict";(self.webpackChunkredkubes_github_io=self.webpackChunkredkubes_github_io||[]).push([[6611],{2636:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>d,contentTitle:()=>r,default:()=>h,frontMatter:()=>s,metadata:()=>n,toc:()=>i});var o=a(5893),l=a(1151);const s={slug:"lab-13",title:"Deploy workloads using Otomi",sidebar_label:"Create workloads"},r=void 0,n={id:"get-started/labs/lab-13",title:"Deploy workloads using Otomi",description:"In the previous lab we deployed a workload using Argo CD with a BYO manifest and we explored the Catalog. In this lab we'll create a workload (a Kubernetes Deployment) using the Catalog and the Workload feature.",source:"@site/docs/get-started/labs/lab-13.md",sourceDirName:"get-started/labs",slug:"/get-started/labs/lab-13",permalink:"/docs/get-started/labs/lab-13",draft:!1,unlisted:!1,editUrl:"https://github.com/redkubes/redkubes.github.io/tree/main/docs/get-started/labs/lab-13.md",tags:[],version:"current",frontMatter:{slug:"lab-13",title:"Deploy workloads using Otomi",sidebar_label:"Create workloads"},sidebar:"mainSidebar",previous:{title:"Explore the Catalog",permalink:"/docs/get-started/labs/lab-29"},next:{title:"Expose services",permalink:"/docs/get-started/labs/lab-18"}},d={},i=[{value:"Create a Workload from the Catalog",id:"create-a-workload-from-the-catalog",level:2}];function c(e){const t={code:"code",h2:"h2",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",...(0,l.a)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.p,{children:"In the previous lab we deployed a workload using Argo CD with a BYO manifest and we explored the Catalog. In this lab we'll create a workload (a Kubernetes Deployment) using the Catalog and the Workload feature."}),"\n",(0,o.jsx)(t.h2,{id:"create-a-workload-from-the-catalog",children:"Create a Workload from the Catalog"}),"\n",(0,o.jsxs)(t.p,{children:["Before creating a workload from the Catalog, we'll need the ",(0,o.jsx)(t.code,{children:"repository"})," and ",(0,o.jsx)(t.code,{children:"tag"})," of the image to use. Go to the list of Builds and add the ",(0,o.jsx)(t.code,{children:"repository"})," of the ",(0,o.jsx)(t.code,{children:"blue"})," build to your clipboard. Remember that the tag is ",(0,o.jsx)(t.code,{children:"latest"}),"."]}),"\n",(0,o.jsx)(t.p,{children:"You can create a workload from the developer catalog:"}),"\n",(0,o.jsxs)(t.ol,{children:["\n",(0,o.jsxs)(t.li,{children:["Go to ",(0,o.jsx)(t.code,{children:"Catalog"})," in the left menu and click on the ",(0,o.jsx)(t.code,{children:"k8s-deployment"}),"template"]}),"\n",(0,o.jsxs)(t.li,{children:["Click on ",(0,o.jsx)(t.code,{children:"Values"})]}),"\n",(0,o.jsxs)(t.li,{children:["Add the Name ",(0,o.jsx)(t.code,{children:"blue"})]}),"\n",(0,o.jsxs)(t.li,{children:["Leave the ",(0,o.jsx)(t.code,{children:"Auto image updater"})," to ",(0,o.jsx)(t.code,{children:"Disabled"})]}),"\n",(0,o.jsxs)(t.li,{children:["In the workload ",(0,o.jsx)(t.code,{children:"values"}),", change the following parameters:"]}),"\n"]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-yaml",children:"image:\n  repository: <paste from clipboard>\n  tag: latest\n"})}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.img,{alt:"workloads",src:a(9968).Z+"",width:"3520",height:"2126"})}),"\n",(0,o.jsxs)(t.ol,{start:"6",children:["\n",(0,o.jsxs)(t.li,{children:["Click ",(0,o.jsx)(t.code,{children:"Submit"})," and then ",(0,o.jsx)(t.code,{children:"Deploy Changes"})]}),"\n"]}),"\n",(0,o.jsx)(t.p,{children:"Otomi will now create all the needed Argo CD resources to deploy your workload."}),"\n",(0,o.jsxs)(t.ol,{start:"7",children:["\n",(0,o.jsxs)(t.li,{children:["Click on ",(0,o.jsx)(t.code,{children:"Workloads"})," in the left menu. You will now see a list of all Workloads and there status:"]}),"\n"]}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.img,{alt:"workloads",src:a(4583).Z+"",width:"3518",height:"2088"})}),"\n",(0,o.jsxs)(t.ol,{start:"8",children:["\n",(0,o.jsxs)(t.li,{children:["In the workloads list, click on the ",(0,o.jsx)(t.code,{children:"Application"})," link of your workload to see the status of your workload in Argo CD:"]}),"\n"]}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.img,{alt:"workloads",src:a(5123).Z+"",width:"3520",height:"1704"})}),"\n",(0,o.jsx)(t.p,{children:"The values of a workload can be changed at any time. Changes will automatically be synchronized."})]})}function h(e={}){const{wrapper:t}={...(0,l.a)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},9968:(e,t,a)=>{a.d(t,{Z:()=>o});const o=a.p+"assets/images/workloads-1-7ffc4a919fb1afeb70bad4401ada6fcf.png"},4583:(e,t,a)=>{a.d(t,{Z:()=>o});const o=a.p+"assets/images/workloads-2-5cad51ba977ab4ed7559da6d81a27101.png"},5123:(e,t,a)=>{a.d(t,{Z:()=>o});const o=a.p+"assets/images/workloads-3-57afb6a313e52744d5f798989d7d2980.png"},1151:(e,t,a)=>{a.d(t,{Z:()=>n,a:()=>r});var o=a(7294);const l={},s=o.createContext(l);function r(e){const t=o.useContext(s);return o.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function n(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:r(e.components),o.createElement(s.Provider,{value:t},e.children)}}}]);