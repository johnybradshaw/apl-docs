"use strict";(self.webpackChunkredkubes_github_io=self.webpackChunkredkubes_github_io||[]).push([[9522],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return m}});var o=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var c=o.createContext({}),s=function(e){var t=o.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=s(e.components);return o.createElement(c.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},d=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,c=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),d=s(n),m=r,h=d["".concat(c,".").concat(m)]||d[m]||p[m]||a;return n?o.createElement(h,i(i({ref:t},u),{},{components:n})):o.createElement(h,i({ref:t},u))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,i=new Array(a);i[0]=d;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l.mdxType="string"==typeof e?e:r,i[1]=l;for(var s=2;s<a;s++)i[s]=n[s];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}d.displayName="MDXCreateElement"},7739:function(e,t,n){n.r(t),n.d(t,{assets:function(){return u},contentTitle:function(){return c},default:function(){return m},frontMatter:function(){return l},metadata:function(){return s},toc:function(){return p}});var o=n(7462),r=n(3366),a=(n(7294),n(3905)),i=["components"],l={slug:"installation/activation/",title:"Activation steps"},c=void 0,s={unversionedId:"activation",id:"activation",title:"Activation steps",description:"After Otomi is installed, Drone needs to be activated. Follow the instructions below:",source:"@site/docs/activation.md",sourceDirName:".",slug:"/installation/activation/",permalink:"/docs/installation/activation/",editUrl:"https://github.com/redkubes/redkubes.github.io/tree/master/docs/activation.md",tags:[],version:"current",frontMatter:{slug:"installation/activation/",title:"Activation steps"},sidebar:"mainSidebar",previous:{title:"Install from chart",permalink:"/docs/installation/chart"},next:{title:"Overview",permalink:"/docs/console/"}},u={},p=[{value:"Step 1: Get the log output of the installer job",id:"step-1-get-the-log-output-of-the-installer-job",level:3},{value:"Step 2 (optional): Add the auto generated CA to your keychain",id:"step-2-optional-add-the-auto-generated-ca-to-your-keychain",level:3},{value:"Step 3: Activate Drone",id:"step-3-activate-drone",level:3}],d={toc:p};function m(e){var t=e.components,n=(0,r.Z)(e,i);return(0,a.kt)("wrapper",(0,o.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"After Otomi is installed, Drone needs to be activated. Follow the instructions below:"),(0,a.kt)("h3",{id:"step-1-get-the-log-output-of-the-installer-job"},"Step 1: Get the log output of the installer job"),(0,a.kt)("p",null,"When the installer job (in the default namespace) has finished, copy the URL and the generated password from the bottom of the logs, sign in to the console with the provided URL, username and password."),(0,a.kt)("p",null,"Use the following command to get the logs of the installer job:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"kubectl logs jobs/otomi -n default -f\n")),(0,a.kt)("h3",{id:"step-2-optional-add-the-auto-generated-ca-to-your-keychain"},"Step 2 (optional): Add the auto generated CA to your keychain"),(0,a.kt)("p",null,"Otomi by default automatically generates a CA. The generated CA is of course not trusted on your local machine. Here are some options to prevent you from clicking away lots of security warning in your browser:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},'In the left menu of the console, click on "Download CA"'),(0,a.kt)("li",{parentName:"ol"},"Double click the downloaded CA.crt or add the CA to your keychain on Mac using the following command:")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"sudo security add-trusted-cert -d -r trustRoot -k /Library/Keychains/System.keychain ~/Downloads/ca.crt  \n")),(0,a.kt)("p",null,"On Windows, use PowerShell (running as Administrator) with the Certutil:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-powershell"},"certutil.exe -addstore root <downloaded cert path>\n")),(0,a.kt)("p",null,"Or:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-powershell"},'Import-Certificate -FilePath "<downloaded cert path>" -CertStoreLocation Cert:\\LocalMachine\\Root\n# Restart the browser \n')),(0,a.kt)("p",null,"But you could also run Chrome in insecure mode:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"alias chrome-insecure='/Applications/Google\\ Chrome.app/Contents/MacOS/Google\\ Chrome --ignore-certificate-errors --ignore-urlfetcher-cert-requests &> /dev/null'\n")),(0,a.kt)("ol",{start:3},(0,a.kt)("li",{parentName:"ol"},"Optional: Restart Docker (to support pushing images to Harbor)")),(0,a.kt)("h3",{id:"step-3-activate-drone"},"Step 3: Activate Drone"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://www.drone.io/"},"Drone")," is an integral part in the deployment of Otomi cluster configuration."),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"In the side menu of Otomi Console under ",(0,a.kt)("inlineCode",{parentName:"li"},"platform")," click on the ",(0,a.kt)("strong",{parentName:"li"},"Drone")," app"),(0,a.kt)("li",{parentName:"ol"},"Click on the ",(0,a.kt)("inlineCode",{parentName:"li"},"play")," button in the top right. A new tab will open for Drone"),(0,a.kt)("li",{parentName:"ol"},"Sign in locally with as ",(0,a.kt)("inlineCode",{parentName:"li"},"otomi-admin")," and the password provided in the logs of the installer job."),(0,a.kt)("li",{parentName:"ol"},"Click on ",(0,a.kt)("inlineCode",{parentName:"li"},"Authorize Application")),(0,a.kt)("li",{parentName:"ol"},"Click on `Submit on the Complete your Drone Registration page. You don't need to fill in your Email, Full Name or Company Name if you don't want to"),(0,a.kt)("li",{parentName:"ol"},"Click on the ",(0,a.kt)("inlineCode",{parentName:"li"},"otomi/values")," repository"),(0,a.kt)("li",{parentName:"ol"},"Click on ",(0,a.kt)("inlineCode",{parentName:"li"},"+ Activate Repository"))),(0,a.kt)("p",null,"Now you can start using Otomi. The first step will be to create a ",(0,a.kt)("a",{parentName:"p",href:"/docs/console/teams"},"Team"),"."))}m.isMDXComponent=!0}}]);