"use strict";(self.webpackChunkredkubes_github_io=self.webpackChunkredkubes_github_io||[]).push([[9216],{752:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>r,contentTitle:()=>s,default:()=>h,frontMatter:()=>l,metadata:()=>a,toc:()=>d});var t=i(5893),o=i(1151);const l={slug:"linode",title:"Linode",sidebar_label:"Linode"},s="# Install Otomi on Linode Kubernetes Engine (LKE) with Linode DNS",a={id:"get-started/installation/linode",title:"Linode",description:"Install Otomi on Linode Kubernetes Engine (LKE) with Linode DNS",source:"@site/docs/get-started/installation/linode.md",sourceDirName:"get-started/installation",slug:"/get-started/installation/linode",permalink:"/docs/get-started/installation/linode",draft:!1,unlisted:!1,editUrl:"https://github.com/redkubes/redkubes.github.io/tree/main/docs/get-started/installation/linode.md",tags:[],version:"current",frontMatter:{slug:"linode",title:"Linode",sidebar_label:"Linode"},sidebar:"mainSidebar",previous:{title:"Google Cloud Platform",permalink:"/docs/get-started/installation/gcp"},next:{title:"Scaleway",permalink:"/docs/get-started/installation/scaleway"}},r={},d=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Configure Linode Kubernetes cluster",id:"configure-linode-kubernetes-cluster",level:2},{value:"Configure DNS",id:"configure-dns",level:2},{value:"Creating Linode Credentials",id:"creating-linode-credentials",level:3},{value:"Create the values.yaml file",id:"create-the-valuesyaml-file",level:2},{value:"Install Otomi using helm",id:"install-otomi-using-helm",level:2}];function c(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"-install-otomi-on-linode-kubernetes-engine-lke-with-linode-dns",children:"# Install Otomi on Linode Kubernetes Engine (LKE) with Linode DNS"}),"\n",(0,t.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://cloud.linode.com/",children:"linode-access"})}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"configure-linode-kubernetes-cluster",children:"Configure Linode Kubernetes cluster"}),"\n",(0,t.jsx)(n.p,{children:"Configure the LKE cluster with the following specs"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["K8s version: ",(0,t.jsx)(n.code,{children:"1.29"})]}),"\n",(0,t.jsx)(n.li,{children:"Enable HA Control Plane"}),"\n",(0,t.jsx)(n.li,{children:"Dedicated CPU: Dedicated 8 GB Plan, 4 CPUs, 160 GB Storage"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["Download the ",(0,t.jsx)(n.code,{children:"kubeconfig"}),"."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Update the KUBECONFIG env to gain access to the cluster\nexport KUBECONFIG=<path-to-downloads>/otomi--kubeconfig.yaml\n"})}),"\n",(0,t.jsx)(n.h2,{id:"configure-dns",children:"Configure DNS"}),"\n",(0,t.jsx)(n.admonition,{type:"info",children:(0,t.jsx)(n.p,{children:"When using Domains in Linode, name resolving takes at least 30 min to work. The Otomi installer will retry until it can resolve the Keycloak host name in the configured domain."})}),"\n",(0,t.jsx)(n.p,{children:"If you want to learn about how to use Linode DNS Manager read the following tutorials:"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.a,{href:"https://www.linode.com/docs/platform/manager/dns-manager/",children:"An Introduction to Managing DNS"}),", and ",(0,t.jsx)(n.a,{href:"https://www.linode.com/docs/networking/dns/",children:"general documentation"})]}),"\n",(0,t.jsx)(n.h3,{id:"creating-linode-credentials",children:"Creating Linode Credentials"}),"\n",(0,t.jsxs)(n.p,{children:["Generate a new oauth token by following the instructions at ",(0,t.jsx)(n.a,{href:"https://developers.linode.com/api/v4#section/Access-and-Authentication",children:"Access-and-Authentication"})]}),"\n",(0,t.jsx)(n.p,{children:"Set environment variable for the token:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'LINODE_TOKEN="<your-token-here>"\n'})}),"\n",(0,t.jsxs)(n.p,{children:["The environment variable ",(0,t.jsx)(n.code,{children:"LINODE_TOKEN"})," will be needed to run ExternalDNS with Linode."]}),"\n",(0,t.jsx)(n.h2,{id:"create-the-valuesyaml-file",children:"Create the values.yaml file"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"tee values.yaml<<EOF\ncluster:\n  name: otomi\n  provider: linode\n  domainSuffix: linode.example.com\notomi:\n  hasExternalDNS: true\ndns:\n  domainFilters: \n    - example.com\n  provider:\n    linode:\n      apiToken: $LINODE_TOKEN\napps:\n  cert-manager:\n    issuer: letsencrypt\n    stage: production\n    email: admin@example.com\nEOF\n"})}),"\n",(0,t.jsxs)(n.p,{children:["And adjust the ",(0,t.jsx)(n.code,{children:"domainSuffix"}),", ",(0,t.jsx)(n.code,{children:"domainFilters"})," and ",(0,t.jsx)(n.code,{children:"email"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"install-otomi-using-helm",children:"Install Otomi using helm"}),"\n",(0,t.jsx)(n.p,{children:"Install Otomi using Helm:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"helm repo add otomi https://otomi.io/otomi-core\nhelm repo update\nhelm install -f values.yaml otomi otomi/otomi\n"})}),"\n",(0,t.jsx)(n.p,{children:"Monitor the logs of the installer job:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"kubectl logs jobs/otomi -n default -f\n"})}),"\n",(0,t.jsxs)(n.p,{children:["When the installer is finished, copy the ",(0,t.jsx)(n.code,{children:"url"})," and ",(0,t.jsx)(n.code,{children:"admin-password"})," from the console output."]}),"\n",(0,t.jsxs)(n.p,{children:["Follow the activation steps ",(0,t.jsx)(n.a,{href:"https://otomi.io/docs/get-started/activation",children:"here."})]}),"\n",(0,t.jsx)(n.admonition,{type:"tip",children:(0,t.jsxs)(n.p,{children:["Like to learn how to use Otomi? Go through the ",(0,t.jsx)(n.a,{href:"/docs/get-started/labs/overview",children:"Get Started labs"})]})})]})}function h(e={}){const{wrapper:n}={...(0,o.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},1151:(e,n,i)=>{i.d(n,{Z:()=>a,a:()=>s});var t=i(7294);const o={},l=t.createContext(o);function s(e){const n=t.useContext(l);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),t.createElement(l.Provider,{value:n},e.children)}}}]);