"use strict";(self.webpackChunkredkubes_github_io=self.webpackChunkredkubes_github_io||[]).push([[567],{3905:(e,t,r)=>{r.d(t,{Zo:()=>u,kt:()=>m});var a=r(7294);function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var s=a.createContext({}),c=function(e){var t=a.useContext(s),r=t;return e&&(r="function"==typeof e?e(t):l(l({},t),e)),r},u=function(e){var t=c(e.components);return a.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var r=e.components,n=e.mdxType,i=e.originalType,s=e.parentName,u=o(e,["components","mdxType","originalType","parentName"]),d=c(r),m=n,h=d["".concat(s,".").concat(m)]||d[m]||p[m]||i;return r?a.createElement(h,l(l({ref:t},u),{},{components:r})):a.createElement(h,l({ref:t},u))}));function m(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var i=r.length,l=new Array(i);l[0]=d;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:n,l[1]=o;for(var c=2;c<i;c++)l[c]=r[c];return a.createElement.apply(null,l)}return a.createElement.apply(null,r)}d.displayName="MDXCreateElement"},2880:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>p,frontMatter:()=>i,metadata:()=>o,toc:()=>c});var a=r(7462),n=(r(7294),r(3905));const i={slug:"part-7",title:"Create secrets",sidebar_label:"Part 7"},l=void 0,o={unversionedId:"for-devs/get-started/part-7",id:"for-devs/get-started/part-7",title:"Create secrets",description:"When the platform administrator has enabled Vault, you can use Vault to store and manage secrets. Secrets in Vault can be synchronized to your team namespace as Kubernetes secrets. In this part we'll first create a secret in Vault and then sync the secret to your team namespace using the Secrets option in Otomi Console.",source:"@site/docs/for-devs/get-started/part-7.md",sourceDirName:"for-devs/get-started",slug:"/for-devs/get-started/part-7",permalink:"/docs/for-devs/get-started/part-7",draft:!1,editUrl:"https://github.com/redkubes/redkubes.github.io/tree/main/docs/for-devs/get-started/part-7.md",tags:[],version:"current",frontMatter:{slug:"part-7",title:"Create secrets",sidebar_label:"Part 7"},sidebar:"mainSidebar",previous:{title:"Part 6",permalink:"/docs/for-devs/get-started/part-6"},next:{title:"Part 8",permalink:"/docs/for-devs/get-started/part-8"}},s={},c=[{value:"Create a secret in Vault",id:"create-a-secret-in-vault",level:2},{value:"Create a secret in Otomi",id:"create-a-secret-in-otomi",level:2}],u={toc:c};function p(e){let{components:t,...i}=e;return(0,n.kt)("wrapper",(0,a.Z)({},u,i,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("p",null,"When the platform administrator has enabled Vault, you can use Vault to store and manage secrets. Secrets in Vault can be synchronized to your team namespace as Kubernetes secrets. In this part we'll first create a secret in Vault and then sync the secret to your team namespace using the Secrets option in Otomi Console."),(0,n.kt)("h2",{id:"create-a-secret-in-vault"},"Create a secret in Vault"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Open the Vault app in your team apps")),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"kubecfg",src:r(9020).Z,width:"2184",height:"1050"})),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Sign in with Method ",(0,n.kt)("inlineCode",{parentName:"li"},"OIDC"),", click on ",(0,n.kt)("inlineCode",{parentName:"li"},"Sign in with OIDC Provider")," and leave role blank")),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"kubecfg",src:r(7953).Z,width:"1700",height:"910"})),(0,n.kt)("p",null,"You are now automatically redirected to your team space (secrets/teams/team-demo) in the example below) in Vault."),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"kubecfg",src:r(4528).Z,width:"2182",height:"890"})),(0,n.kt)("admonition",{type:"info"},(0,n.kt)("p",{parentName:"admonition"},"In your team space in Vault you will see 2 secrets: 1) ",(0,n.kt)("inlineCode",{parentName:"p"},"mysecret-generic")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"otomi-welcome"),". Do NOT remove these secrets. If you do, the team space in Vault will be removed.")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Click on Create secret")),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"kubecfg",src:r(1).Z,width:"2172",height:"996"})),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Provide a name for the secret. We'll use the name hello. The name of the secret in this case will be: ",(0,n.kt)("inlineCode",{parentName:"li"},"teams/team-demo/hello")),(0,n.kt)("li",{parentName:"ul"},"Fill in a ",(0,n.kt)("inlineCode",{parentName:"li"},"Key")," (TARGET in the example below) and a ",(0,n.kt)("inlineCode",{parentName:"li"},"value")),(0,n.kt)("li",{parentName:"ul"},"Click on save")),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"kubecfg",src:r(4435).Z,width:"2186",height:"1338"})),(0,n.kt)("p",null,"The secret is now created in vault. Now we need to synchronize the secret in Vault to Kubernetes so the secret can be used in workloads."),(0,n.kt)("h2",{id:"create-a-secret-in-otomi"},"Create a secret in Otomi"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"In the left menu under the Team demo, click Secrets"),(0,n.kt)("li",{parentName:"ul"},"Click on Create secret"),(0,n.kt)("li",{parentName:"ul"},"Provide a name for the secret. The name should match the name of the secret in Vault"),(0,n.kt)("li",{parentName:"ul"},"Select the secret type (Generic in this case)"),(0,n.kt)("li",{parentName:"ul"},"Under Entries fill in the ",(0,n.kt)("inlineCode",{parentName:"li"},"keys")," (the keys of the secret in Vault)"),(0,n.kt)("li",{parentName:"ul"},"Click submit")),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"kubecfg",src:r(7468).Z,width:"2178",height:"1406"})),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Now click on ",(0,n.kt)("inlineCode",{parentName:"li"},"Deploy Changes")," on top of the left menu")),(0,n.kt)("p",null,"The secret in Vault will now be synchronized to Kubernetes and can be used by the team in any workload. Otomi Console makes this easy by offering a secret selector during the creation of services."),(0,n.kt)("admonition",{type:"info"},(0,n.kt)("p",{parentName:"admonition"},"In this part we only covered using generic secrets. See ",(0,n.kt)("a",{parentName:"p",href:"../console/secrets"},"here")," to see how you can create TLS and pull secrets")))}p.isMDXComponent=!0},4435:(e,t,r)=>{r.d(t,{Z:()=>a});const a=r.p+"assets/images/create-secret-vault-2-97e5608f722b4c4831b68d4287c6ede2.png"},1:(e,t,r)=>{r.d(t,{Z:()=>a});const a=r.p+"assets/images/create-secret-vault-f25f7a451336d201e828fd7c8ee9565a.png"},4528:(e,t,r)=>{r.d(t,{Z:()=>a});const a=r.p+"assets/images/first-login-vault-439b8235de6ff1274c86bedac333451b.png"},7468:(e,t,r)=>{r.d(t,{Z:()=>a});const a=r.p+"assets/images/otomi-secret-9aa86c0c010cb8900bab7d2800160d71.png"},9020:(e,t,r)=>{r.d(t,{Z:()=>a});const a=r.p+"assets/images/team-vault-a48686d4e9ddeb3f311a03dff06d65df.png"},7953:(e,t,r)=>{r.d(t,{Z:()=>a});const a=r.p+"assets/images/vault-oidc-54fbc2583484993604108a590f2fa5b8.png"}}]);