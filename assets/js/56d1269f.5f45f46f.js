"use strict";(self.webpackChunkredkubes_github_io=self.webpackChunkredkubes_github_io||[]).push([[2687],{4671:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>a,contentTitle:()=>i,default:()=>u,frontMatter:()=>o,metadata:()=>s,toc:()=>d});var l=n(5893),r=n(1151);const o={slug:"vultr",title:"Vultr",sidebar_label:"Vultr"},i="Install Otomi on Vultr",s={id:"get-started/installation/vultr",title:"Vultr",description:"Prerequisites",source:"@site/docs/get-started/installation/vultr.md",sourceDirName:"get-started/installation",slug:"/get-started/installation/vultr",permalink:"/docs/get-started/installation/vultr",draft:!1,unlisted:!1,editUrl:"https://github.com/redkubes/redkubes.github.io/tree/main/docs/get-started/installation/vultr.md",tags:[],version:"current",frontMatter:{slug:"vultr",title:"Vultr",sidebar_label:"Vultr"},sidebar:"mainSidebar",previous:{title:"Scaleway",permalink:"/docs/get-started/installation/scaleway"},next:{title:"Helm",permalink:"/docs/get-started/installation/helm"}},a={},d=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Create a Kubernetes cluster",id:"create-a-kubernetes-cluster",level:2},{value:"Configure DNS using Cloudflare",id:"configure-dns-using-cloudflare",level:2},{value:"Creating a Cloudflare DNS zone",id:"creating-a-cloudflare-dns-zone",level:3},{value:"Creating Cloudflare Credentials",id:"creating-cloudflare-credentials",level:3},{value:"Create the values.yaml file",id:"create-the-valuesyaml-file",level:2},{value:"Install Otomi using helm",id:"install-otomi-using-helm",level:2}];function c(e){const t={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.a)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(t.h1,{id:"install-otomi-on-vultr",children:"Install Otomi on Vultr"}),"\n",(0,l.jsx)(t.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,l.jsxs)(t.ul,{children:["\n",(0,l.jsx)(t.li,{children:(0,l.jsx)(t.a,{href:"https://github.com/vultr/vultr-cli",children:"Vultr CLI"})}),"\n",(0,l.jsx)(t.li,{children:(0,l.jsx)(t.a,{href:"https://kubernetes.io/docs/tasks/tools/",children:"Helm"})}),"\n"]}),"\n",(0,l.jsx)(t.p,{children:"Export your Vultr API Key:"}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{children:"export VULTR_API_KEY=<your api key>\n"})}),"\n",(0,l.jsx)(t.h2,{id:"create-a-kubernetes-cluster",children:"Create a Kubernetes cluster"}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{children:'vultr-cli kubernetes create \\\n    --label="otomi" \\\n    --region="ams" \\\n    --version="v1.27.7+1" \\\n    --node-pools="quantity:3,plan:vc2-4c-8gb,label:otomipool"\n'})}),"\n",(0,l.jsx)(t.h2,{id:"configure-dns-using-cloudflare",children:"Configure DNS using Cloudflare"}),"\n",(0,l.jsx)(t.p,{children:"Because DNS support for Vultr is not available in Otomi yet, we'll use Cloudflare DNS."}),"\n",(0,l.jsx)(t.h3,{id:"creating-a-cloudflare-dns-zone",children:"Creating a Cloudflare DNS zone"}),"\n",(0,l.jsx)(t.p,{children:"We highly recommend to read this tutorial if you haven't used Cloudflare before:"}),"\n",(0,l.jsx)(t.p,{children:(0,l.jsx)(t.a,{href:"https://support.cloudflare.com/hc/en-us/articles/201720164-Step-2-Create-a-Cloudflare-account-and-add-a-website",children:"Create a Cloudflare account and add a website"})}),"\n",(0,l.jsx)(t.h3,{id:"creating-cloudflare-credentials",children:"Creating Cloudflare Credentials"}),"\n",(0,l.jsxs)(t.p,{children:["Snippet from ",(0,l.jsx)(t.a,{href:"https://api.cloudflare.com/#getting-started-endpoints",children:"Cloudflare - Getting Started"}),":"]}),"\n",(0,l.jsxs)(t.blockquote,{children:["\n",(0,l.jsx)(t.p,{children:"Cloudflare's API exposes the entire Cloudflare infrastructure via a standardized programmatic interface. Using Cloudflare's API, you can do just about anything you can do on cloudflare.com via the customer dashboard."}),"\n"]}),"\n",(0,l.jsxs)(t.blockquote,{children:["\n",(0,l.jsxs)(t.p,{children:['The Cloudflare API is a RESTful API based on HTTPS requests and JSON responses. If you are registered with Cloudflare, you can obtain your API key from the bottom of the "My Account" page, found here: ',(0,l.jsx)(t.a,{href:"https://dash.cloudflare.com/profile",children:"Go to My account"}),"."]}),"\n"]}),"\n",(0,l.jsxs)(t.p,{children:["When using API Token authentication, the token should be granted Zone ",(0,l.jsx)(t.code,{children:"Read"}),", DNS ",(0,l.jsx)(t.code,{children:"Edit"})," privileges, and access to ",(0,l.jsx)(t.code,{children:"All zones"}),"."]}),"\n",(0,l.jsxs)(t.p,{children:["If you would like to further restrict the API permissions to a specific zone (or zones), you also need to use the ",(0,l.jsx)(t.code,{children:"--zone-id-filter"})," so that the underlying API requests only access the zones that you explicitly specify, as opposed to accessing all zones."]}),"\n",(0,l.jsxs)(t.p,{children:["Set the ",(0,l.jsx)(t.code,{children:"CF_API_TOKEN"})," environment variable:"]}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{children:'CF_API_TOKEN="Your Cloudflare API Token"\n'})}),"\n",(0,l.jsx)(t.h2,{id:"create-the-valuesyaml-file",children:"Create the values.yaml file"}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{children:"cluster:\n  name: otomi\n  provider: vultr\n  domainSuffix: linode.example.com\notomi:\n  hasExternalDNS: true\ndns:\n  domainFilters:\n    - example.com\n  provider:\n    cloudflare:\n      apiToken: $CF_API_TOKEN\n      proxied: false\napps:\n  cert-manager:\n    issuer: letsencrypt\n    stage: production\n    email: admin@example.com\n"})}),"\n",(0,l.jsx)(t.h2,{id:"install-otomi-using-helm",children:"Install Otomi using helm"}),"\n",(0,l.jsx)(t.p,{children:"Install Otomi using Helm:"}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-bash",children:"helm repo add otomi https://otomi.io/otomi-core\nhelm repo update\nhelm install -f values.yaml otomi otomi/otomi\n"})}),"\n",(0,l.jsx)(t.p,{children:"Monitor the logs of the installer job:"}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-bash",children:"kubectl logs jobs/otomi -n default -f\n"})}),"\n",(0,l.jsxs)(t.p,{children:["When the installer is finished, copy the ",(0,l.jsx)(t.code,{children:"url"})," and ",(0,l.jsx)(t.code,{children:"admin-password"})," from the console output."]}),"\n",(0,l.jsxs)(t.p,{children:["Follow the activation steps ",(0,l.jsx)(t.a,{href:"https://otomi.io/docs/get-started/activation",children:"here."})]}),"\n",(0,l.jsx)(t.admonition,{type:"tip",children:(0,l.jsxs)(t.p,{children:["Like to learn how to use Otomi? Go through the ",(0,l.jsx)(t.a,{href:"/docs/get-started/labs/overview",children:"Get Started labs"})]})})]})}function u(e={}){const{wrapper:t}={...(0,r.a)(),...e.components};return t?(0,l.jsx)(t,{...e,children:(0,l.jsx)(c,{...e})}):c(e)}},1151:(e,t,n)=>{n.d(t,{Z:()=>s,a:()=>i});var l=n(7294);const r={},o=l.createContext(r);function i(e){const t=l.useContext(o);return l.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function s(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),l.createElement(o.Provider,{value:t},e.children)}}}]);