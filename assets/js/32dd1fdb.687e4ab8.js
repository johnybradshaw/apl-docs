"use strict";(self.webpackChunkredkubes_github_io=self.webpackChunkredkubes_github_io||[]).push([[2635],{3905:function(e,t,n){n.d(t,{Zo:function(){return m},kt:function(){return d}});var i=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=i.createContext({}),c=function(e){var t=i.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},m=function(e){var t=c(e.components);return i.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},p=i.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,m=l(e,["components","mdxType","originalType","parentName"]),p=c(n),d=r,h=p["".concat(s,".").concat(d)]||p[d]||u[d]||o;return n?i.createElement(h,a(a({ref:t},m),{},{components:n})):i.createElement(h,a({ref:t},m))}));function d(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,a=new Array(o);a[0]=p;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,a[1]=l;for(var c=2;c<o;c++)a[c]=n[c];return i.createElement.apply(null,a)}return i.createElement.apply(null,n)}p.displayName="MDXCreateElement"},111:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return l},contentTitle:function(){return s},metadata:function(){return c},toc:function(){return m},default:function(){return p}});var i=n(7462),r=n(3366),o=(n(7294),n(3905)),a=["components"],l={slug:"tutorials/create-ksvc-otomi",title:"Create and expose a Knative service with Otomi",sidebar_label:"Knative with Otomi"},s=void 0,c={unversionedId:"tutorial-10-create-ksvc-otomi",id:"tutorial-10-create-ksvc-otomi",title:"Create and expose a Knative service with Otomi",description:"When Otomi is installed with minimal values, a CA is automatically generated and added to the worker nodes. When using Azure AKS version 1.19 and up, the CA can not be automatically added to the worker nodes and pulling images from a Harbor registry is not possible. See this known issue for more information.",source:"@site/docs/tutorial-10-create-ksvc-otomi.md",sourceDirName:".",slug:"/tutorials/create-ksvc-otomi",permalink:"/docs/tutorials/create-ksvc-otomi",editUrl:"https://github.com/redkubes/redkubes.github.io/tree/master/docs/tutorial-10-create-ksvc-otomi.md",tags:[],version:"current",frontMatter:{slug:"tutorials/create-ksvc-otomi",title:"Create and expose a Knative service with Otomi",sidebar_label:"Knative with Otomi"},sidebar:"mainSidebar",previous:{title:"Use secret in Kubernetes",permalink:"/docs/tutorials/use-secret"},next:{title:"Overview",permalink:"/docs/sre/"}},m=[],u={toc:m};function p(e){var t=e.components,n=(0,r.Z)(e,a);return(0,o.kt)("wrapper",(0,i.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"When Otomi is installed with minimal values, a CA is automatically generated and added to the worker nodes. When using Azure AKS version 1.19 and up, the CA can not be automatically added to the worker nodes and pulling images from a Harbor registry is not possible. See ",(0,o.kt)("a",{parentName:"p",href:"/docs/sre/known-issues/custom-ca"},"this")," known issue for more information."))),(0,o.kt)("p",null,"In his tutorial, we are going to create a Knative service with Otomi Console and publicly expose it."),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"In the top bar in Otomi Console, select team demo"),(0,o.kt)("li",{parentName:"ul"},"In the left panel under the Team demo, click ",(0,o.kt)("inlineCode",{parentName:"li"},"Services")," then click on ",(0,o.kt)("inlineCode",{parentName:"li"},"Create Service")),(0,o.kt)("li",{parentName:"ul"},"Fill in the form with these values:")),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Name: hello-otomi"),(0,o.kt)("li",{parentName:"ol"},"Service type: New Knative service"),(0,o.kt)("li",{parentName:"ol"},"In the ",(0,o.kt)("inlineCode",{parentName:"li"},"Security context")," block, fill in ",(0,o.kt)("inlineCode",{parentName:"li"},"1001")," in the ",(0,o.kt)("inlineCode",{parentName:"li"},"Run As User")," field"),(0,o.kt)("li",{parentName:"ol"},"In the ",(0,o.kt)("inlineCode",{parentName:"li"},"Container image")," block, fill in the name of the image you previously pushed to Harbor in the ",(0,o.kt)("inlineCode",{parentName:"li"},"Repository")," field and fill in ",(0,o.kt)("inlineCode",{parentName:"li"},"latest")," in the ",(0,o.kt)("inlineCode",{parentName:"li"},"Tag")," field"),(0,o.kt)("li",{parentName:"ol"},"In the ",(0,o.kt)("inlineCode",{parentName:"li"},"Container resources")," block, fill in the ",(0,o.kt)("inlineCode",{parentName:"li"},"Limits")," and ",(0,o.kt)("inlineCode",{parentName:"li"},"Requests")," (use the provided values: 50m and 64Mi)"),(0,o.kt)("li",{parentName:"ol"},"Exposure: Public"),(0,o.kt)("li",{parentName:"ol"},"Click on ",(0,o.kt)("inlineCode",{parentName:"li"},"Submit")),(0,o.kt)("li",{parentName:"ol"},"Click on ",(0,o.kt)("inlineCode",{parentName:"li"},"Deploy Changes")," (the Deploy Changes button in the left panel will light-up after you click on submit)")),(0,o.kt)("p",null,"Deploying changes in Otomi usually takes just a couple of minutes."),(0,o.kt)("p",null,"Go to ",(0,o.kt)("a",{parentName:"p",href:"https://hello-otomi.team-demo.your-domain.com/"},"https://hello-otomi.team-demo.your-domain.com/")," to see the app."))}p.isMDXComponent=!0}}]);