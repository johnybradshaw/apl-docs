"use strict";(self.webpackChunkredkubes_github_io=self.webpackChunkredkubes_github_io||[]).push([[4493],{3905:(e,t,n)=>{n.d(t,{Zo:()=>m,kt:()=>u});var i=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=i.createContext({}),d=function(e){var t=i.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},m=function(e){var t=d(e.components);return i.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},c=i.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,m=r(e,["components","mdxType","originalType","parentName"]),c=d(n),u=a,k=c["".concat(s,".").concat(u)]||c[u]||p[u]||o;return n?i.createElement(k,l(l({ref:t},m),{},{components:n})):i.createElement(k,l({ref:t},m))}));function u(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,l=new Array(o);l[0]=c;var r={};for(var s in t)hasOwnProperty.call(t,s)&&(r[s]=t[s]);r.originalType=e,r.mdxType="string"==typeof e?e:a,l[1]=r;for(var d=2;d<o;d++)l[d]=n[d];return i.createElement.apply(null,l)}return i.createElement.apply(null,n)}c.displayName="MDXCreateElement"},9030:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>p,frontMatter:()=>o,metadata:()=>r,toc:()=>d});var i=n(7462),a=(n(7294),n(3905));const o={slug:"civo",title:"Civo",sidebar_label:"Civo"},l=void 0,r={unversionedId:"get-started/installation/civo",id:"get-started/installation/civo",title:"Civo",description:"Otomi can also be installed using the Civo marketplace. When Otomi is installed using the Civo marketplace, Otomi is installed without DNS! To see the full potential of Otomi, install Otomi with DNS as described here.",source:"@site/docs/get-started/installation/civo.md",sourceDirName:"get-started/installation",slug:"/get-started/installation/civo",permalink:"/docs/get-started/installation/civo",draft:!1,editUrl:"https://github.com/redkubes/redkubes.github.io/tree/main/docs/get-started/installation/civo.md",tags:[],version:"current",frontMatter:{slug:"civo",title:"Civo",sidebar_label:"Civo"},sidebar:"mainSidebar",previous:{title:"Azure",permalink:"/docs/get-started/installation/azure"},next:{title:"Custom",permalink:"/docs/get-started/installation/custom"}},s={},d=[{value:"CReate a K3s cluster in Civo",id:"create-a-k3s-cluster-in-civo",level:2},{value:"Configure DNS",id:"configure-dns",level:2},{value:"Create the values.yaml file",id:"create-the-valuesyaml-file",level:2},{value:"Install Otomi",id:"install-otomi",level:2}],m={toc:d};function p(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,i.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("admonition",{title:"ATTENTION",type:"info"},(0,a.kt)("p",{parentName:"admonition"},"Otomi can also be installed using the Civo marketplace. When Otomi is installed using the Civo marketplace, Otomi is installed without DNS! To see the full potential of Otomi, install Otomi with DNS as described here.")),(0,a.kt)("h1",{id:"install-otomi-on-aks-with-dns"},"Install Otomi on AKS with DNS"),(0,a.kt)("h2",{id:"create-a-k3s-cluster-in-civo"},"CReate a K3s cluster in Civo"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Sign in to the ",(0,a.kt)("a",{parentName:"li",href:"https://dashboard.civo.com/"},"Civo dashboard")),(0,a.kt)("li",{parentName:"ol"},"Click on ",(0,a.kt)("inlineCode",{parentName:"li"},"Kubernetes")," in the left menu"),(0,a.kt)("li",{parentName:"ol"},"Click ",(0,a.kt)("inlineCode",{parentName:"li"},"Create new cluster")),(0,a.kt)("li",{parentName:"ol"},"Provide a name for the cluster"),(0,a.kt)("li",{parentName:"ol"},"Select the ",(0,a.kt)("inlineCode",{parentName:"li"},"Standard Large")," node pool size (3 nodes)"),(0,a.kt)("li",{parentName:"ol"},"Configure ",(0,a.kt)("inlineCode",{parentName:"li"},"Network")," and ",(0,a.kt)("inlineCode",{parentName:"li"},"Firewall")),(0,a.kt)("li",{parentName:"ol"},"Show advanced options"),(0,a.kt)("li",{parentName:"ol"},"Choose ",(0,a.kt)("inlineCode",{parentName:"li"},"Flannel"),", Cluster type ",(0,a.kt)("inlineCode",{parentName:"li"},"K3S")," and Kubernetes version ",(0,a.kt)("inlineCode",{parentName:"li"},"1.27.1")),(0,a.kt)("li",{parentName:"ol"},"In the Marketplace, under ",(0,a.kt)("inlineCode",{parentName:"li"},"Architecture"),", de-activate ",(0,a.kt)("inlineCode",{parentName:"li"},"Traefik v2 (NodePort)")),(0,a.kt)("li",{parentName:"ol"},"Click ",(0,a.kt)("inlineCode",{parentName:"li"},"Create cluster"))),(0,a.kt)("h2",{id:"configure-dns"},"Configure DNS"),(0,a.kt)("p",null,"Set up DNS in Civo:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Under ",(0,a.kt)("inlineCode",{parentName:"li"},"Networking")," in the Civo Dashboard, click ",(0,a.kt)("inlineCode",{parentName:"li"},"DNS")," and then ",(0,a.kt)("inlineCode",{parentName:"li"},"Add a domain name")),(0,a.kt)("li",{parentName:"ol"},"Fill in a domain name and then click ",(0,a.kt)("inlineCode",{parentName:"li"},"Add domain")),(0,a.kt)("li",{parentName:"ol"},"Create a NS record in the zone where your domain is hosted and add the Civo name servers ",(0,a.kt)("inlineCode",{parentName:"li"},"ns0.civo.com")," ans ",(0,a.kt)("inlineCode",{parentName:"li"},"ns1.civo.com")),(0,a.kt)("li",{parentName:"ol"},"Under ",(0,a.kt)("inlineCode",{parentName:"li"},"Settings"),", ",(0,a.kt)("inlineCode",{parentName:"li"},"Profile"),", click on the tab ",(0,a.kt)("inlineCode",{parentName:"li"},"Security")," and copy the ",(0,a.kt)("inlineCode",{parentName:"li"},"API key"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},'CIVO_TOKEN="<your-token>"\n')),(0,a.kt)("h2",{id:"create-the-valuesyaml-file"},"Create the values.yaml file"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"tee values.yaml<<EOF\ncluster:\n  name: otomi\n  provider: civo\n  domainSuffix: your-civo-domain.example.com # the Civo domain name created in the previous step\notomi:\n  hasExternalDNS: true # required\ndns:\n  domainFilters: \n    - your-civo-domain.example.com\n  provider:\n    civo:\n      apiToken: $CIVO_TOKEN\napps:\n  cert-manager:\n    issuer: letsencrypt\n    stage: production\n    email: admin@your-domain.com\nEOF\n")),(0,a.kt)("p",null,"And adjust the ",(0,a.kt)("inlineCode",{parentName:"p"},"domainSuffix"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"domainFilters"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"apiToken")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"email"),"."),(0,a.kt)("h2",{id:"install-otomi"},"Install Otomi"),(0,a.kt)("p",null,"Install Otomi using Helm:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"helm repo add otomi https://otomi.io/otomi-core\nhelm repo update\nhelm install -f values.yaml otomi otomi/otomi\n")),(0,a.kt)("p",null,"Monitor the logs of the installer job:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"kubectl logs jobs/otomi -n default -f\n")),(0,a.kt)("p",null,"When the installer is finished, copy the ",(0,a.kt)("inlineCode",{parentName:"p"},"url")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"admin-password")," from the console output."),(0,a.kt)("p",null,"Follow the activation steps ",(0,a.kt)("a",{parentName:"p",href:"https://otomi.io/docs/get-started/activation"},"here.")))}p.isMDXComponent=!0}}]);