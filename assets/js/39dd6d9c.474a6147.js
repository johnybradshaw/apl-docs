"use strict";(self.webpackChunkredkubes_github_io=self.webpackChunkredkubes_github_io||[]).push([[8621],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>g});var o=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=o.createContext({}),p=function(e){var t=o.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},c=function(e){var t=p(e.components);return o.createElement(l.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},m=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),m=p(n),g=r,u=m["".concat(l,".").concat(g)]||m[g]||d[g]||i;return n?o.createElement(u,a(a({ref:t},c),{},{components:n})):o.createElement(u,a({ref:t},c))}));function g(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,a=new Array(i);a[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,a[1]=s;for(var p=2;p<i;p++)a[p]=n[p];return o.createElement.apply(null,a)}return o.createElement.apply(null,n)}m.displayName="MDXCreateElement"},5858:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>d,frontMatter:()=>i,metadata:()=>s,toc:()=>p});var o=n(7462),r=(n(7294),n(3905));const i={slug:"deploy-workloads-argo-cd-otomi-kubernetes",title:"Deploy Workloads with Argo CD",sidebar_label:"Deploy Workloads with Argo CD",description:"Learn how to deploy your applications using Argo CD in the Otomi Kubernetes environment with this comprehensive guide. Discover how to manage resources effectively using Git and streamline your deployment process.",keywords:["Argo","ArgoCD","Otomi","Kubernetes","GitOps","Workloads","Deployment","Deploying","HowTo","Tutorial"]},a=void 0,s={unversionedId:"for-devs/get-started/lab-10",id:"for-devs/get-started/lab-10",title:"Deploy Workloads with Argo CD",description:"Learn how to deploy your applications using Argo CD in the Otomi Kubernetes environment with this comprehensive guide. Discover how to manage resources effectively using Git and streamline your deployment process.",source:"@site/docs/for-devs/get-started/lab-10.md",sourceDirName:"for-devs/get-started",slug:"/for-devs/get-started/deploy-workloads-argo-cd-otomi-kubernetes",permalink:"/docs/for-devs/get-started/deploy-workloads-argo-cd-otomi-kubernetes",draft:!1,editUrl:"https://github.com/redkubes/redkubes.github.io/tree/main/docs/for-devs/get-started/lab-10.md",tags:[],version:"current",frontMatter:{slug:"deploy-workloads-argo-cd-otomi-kubernetes",title:"Deploy Workloads with Argo CD",sidebar_label:"Deploy Workloads with Argo CD",description:"Learn how to deploy your applications using Argo CD in the Otomi Kubernetes environment with this comprehensive guide. Discover how to manage resources effectively using Git and streamline your deployment process.",keywords:["Argo","ArgoCD","Otomi","Kubernetes","GitOps","Workloads","Deployment","Deploying","HowTo","Tutorial"]},sidebar:"mainSidebar",previous:{title:"Create secrets",permalink:"/docs/for-devs/get-started/lab-8"},next:{title:"Explore the Catalog",permalink:"/docs/for-devs/get-started/lab-29"}},l={},p=[{value:"Deploying Workloads Using Argo CD and Otomi",id:"deploying-workloads-using-argo-cd-and-otomi",level:2},{value:"Demonstrating the Power of Argo CD",id:"demonstrating-the-power-of-argo-cd",level:3}],c={toc:p};function d(e){let{components:t,...i}=e;return(0,r.kt)("wrapper",(0,o.Z)({},c,i,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},(0,r.kt)("strong",{parentName:"p"},"Prerequisite"),": Argo CD needs to be activated for this lab.")),(0,r.kt)("p",null,"Deploying applications using ",(0,r.kt)("inlineCode",{parentName:"p"},"kubectl apply -f")," can be inefficient. As a developer, managing resources based on code stored in Git enhances control and traceability. Otomi integrates with Argo CD to provide a seamless GitOps experience, streamlining your deployment process."),(0,r.kt)("h2",{id:"deploying-workloads-using-argo-cd-and-otomi"},"Deploying Workloads Using Argo CD and Otomi"),(0,r.kt)("p",null,"Start by navigating to the apps section in the Otomi console, where you will find an app named Argo CD. Click on it to proceed."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Argo CD App in Otomi Console",src:n(9530).Z,width:"2902",height:"1886"})),(0,r.kt)("p",null,"In Argo CD, notice that an application specific to your team has already been set up. This application syncs with any manifest present in the Gitea repository designated for Argo."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Argo CD Team Application Overview",src:n(4536).Z,width:"2908",height:"1678"})),(0,r.kt)("p",null,"After clicking on the app and selecting ",(0,r.kt)("inlineCode",{parentName:"p"},"APP DETAILS"),", you'll find the ",(0,r.kt)("inlineCode",{parentName:"p"},"REPO URL"),". The ",(0,r.kt)("inlineCode",{parentName:"p"},"SYNC POLICY")," is also set to ",(0,r.kt)("inlineCode",{parentName:"p"},"ENABLE AUTO-SYNC"),", facilitating automatic synchronization with the repository."),(0,r.kt)("p",null,"Returning to the Otomi console, select the Gitea app in the apps section. There, you'll discover a new repository titled ",(0,r.kt)("inlineCode",{parentName:"p"},"otomi/team-<name>-argocd"),"."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Gitea Repository for Argo CD in Otomi",src:n(2195).Z,width:"2878",height:"1554"})),(0,r.kt)("h3",{id:"demonstrating-the-power-of-argo-cd"},"Demonstrating the Power of Argo CD"),(0,r.kt)("p",null,"Let's demonstrate the capabilities of Argo CD by adding a manifest to the repository:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Create a file named ",(0,r.kt)("inlineCode",{parentName:"p"},"deploy-nginx.yaml")," in the repository.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Insert the following contents into the file:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},"apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: nginx\n  labels:\n    otomi.io/app: nginx\n    app: nginx\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      app: nginx\n  template:\n    metadata:\n      labels:\n        app: nginx\n    spec:\n      containers:\n        - name: nginx\n          image: nginxinc/nginx-unprivileged:stable\n          resources:\n            limits:\n              memory: '128Mi'\n              cpu: '200m'\n            requests:\n              memory: '64Mi'\n              cpu: '100m'\n          ports:\n            - containerPort: 8080\n---\napiVersion: v1\nkind: Service\nmetadata:\n  name: nginx\nspec:\n  selector:\n    app: nginx\n  ports:\n    - port: 80\n      targetPort: 8080\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Commit the changes to the repository."))),(0,r.kt)("p",null,"Once you return to the Argo CD application, click on the ",(0,r.kt)("inlineCode",{parentName:"p"},"team<name>")," application."),(0,r.kt)("p",null,"Remember, the application is not configured for automatic syncing, so manually initiate a ",(0,r.kt)("inlineCode",{parentName:"p"},"SYNC")," by selecting SYNC and then ",(0,r.kt)("inlineCode",{parentName:"p"},"REFRESH"),"."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Syncing in ArgoCD",src:n(7753).Z,width:"2900",height:"1484"})))}d.isMDXComponent=!0},4536:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/argo-team-app-5c0d2354e5629c4ddb17caf72ac01f3c.png"},2195:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/argo-team-repo-55d332f9a5cd3961872c7b4c2dc42c73.png"},7753:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/argo-team-sync-fadd7f408a457c16fc11e9faf568ee2a.png"},9530:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/team-app-argo-156c8904b68b5593591dd5b79fc3e5b8.png"}}]);