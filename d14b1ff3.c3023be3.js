(window.webpackJsonp=window.webpackJsonp||[]).push([[83],{152:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return c})),n.d(t,"metadata",(function(){return i})),n.d(t,"toc",(function(){return l})),n.d(t,"default",(function(){return d}));var a=n(3),r=n(7),b=(n(0),n(176)),c={slug:"otomi-console/jobs",title:"Jobs"},i={unversionedId:"jobs",id:"jobs",isDocsHomePage:!1,title:"Jobs",description:"Console: new job",source:"@site/docs/jobs.md",slug:"/otomi-console/jobs",permalink:"/docs/otomi-console/jobs",editUrl:"https://github.com/redkubes/redkubes.github.io/tree/master/docs/jobs.md",version:"current",sidebar:"mainSidebar",previous:{title:"Services",permalink:"/docs/otomi-console/services"},next:{title:"Secrets",permalink:"/docs/otomi-console/secrets"}},l=[{value:"Type",id:"type",children:[]},{value:"Name",id:"name",children:[]},{value:"Enabled",id:"enabled",children:[]},{value:"RunPolicy",id:"runpolicy",children:[]},{value:"Script",id:"script",children:[]},{value:"TTL After Finished",id:"ttl-after-finished",children:[]},{value:"Init Container",id:"init-container",children:[{value:"Container Image",id:"container-image",children:[]},{value:"Container resources",id:"container-resources",children:[]},{value:"Environment variables",id:"environment-variables",children:[]},{value:"Secrets",id:"secrets",children:[]},{value:"Secret mounts",id:"secret-mounts",children:[]},{value:"Files",id:"files",children:[]},{value:"Command",id:"command",children:[]},{value:"Command Arguments",id:"command-arguments",children:[]}]},{value:"Pod annotations",id:"pod-annotations",children:[]},{value:"Container image",id:"container-image-1",children:[]},{value:"Container resources",id:"container-resources-1",children:[{value:"Requests",id:"requests-1",children:[]},{value:"Limits",id:"limits-1",children:[]},{value:"Environment variables",id:"environment-variables-1",children:[]},{value:"Secrets",id:"secrets-1",children:[]},{value:"Secret mounts",id:"secret-mounts-1",children:[]},{value:"Files",id:"files-1",children:[]},{value:"Command",id:"command-1",children:[]},{value:"Command Arguments",id:"command-arguments-1",children:[]}]}],o={toc:l};function d(e){var t=e.components,c=Object(r.a)(e,["components"]);return Object(b.b)("wrapper",Object(a.a)({},o,c,{components:t,mdxType:"MDXLayout"}),Object(b.b)("p",null,Object(b.b)("img",{alt:"Console: new job",src:n(245).default})),Object(b.b)("p",null,"This page describes how to create a job, and how to edit a job. Both creating and editing a job use the same form. A Job creates one or more Pods and will continue to retry execution of the Pods until a specified number of them successfully terminate. Otomi also supports creating CronJobs. CronJobs are useful for creating periodic and recurring tasks, like running backups or sending emails. CronJobs can also schedule individual tasks for a specific time, such as scheduling a Job for when your cluster is likely to be idle."),Object(b.b)("h2",{id:"type"},"Type"),Object(b.b)("p",null,"The type of the job. 2 job types are supported:"),Object(b.b)("table",null,Object(b.b)("thead",{parentName:"table"},Object(b.b)("tr",{parentName:"thead"},Object(b.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"Type"),Object(b.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"Description"))),Object(b.b)("tbody",{parentName:"table"},Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Job"),Object(b.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"A Jon creates a Kubernetes Job")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Cron Job"),Object(b.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"A CronJob creates Jobs on a repeating schedule")))),Object(b.b)("h2",{id:"name"},"Name"),Object(b.b)("p",null,"Name of the Job."),Object(b.b)("h2",{id:"enabled"},"Enabled"),Object(b.b)("p",null,"Select to enable the Job. If not enabled, the Job will nopt be executed."),Object(b.b)("h2",{id:"runpolicy"},"RunPolicy"),Object(b.b)("table",null,Object(b.b)("thead",{parentName:"table"},Object(b.b)("tr",{parentName:"thead"},Object(b.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"Setting"),Object(b.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"Description"))),Object(b.b)("tbody",{parentName:"table"},Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Always"),Object(b.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"The job controller will always be re-deployed after a successful deployment")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"OnSpecChange"),Object(b.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"The job controller will only be re-deployed if one changes this specification.")))),Object(b.b)("h2",{id:"script"},"Script"),Object(b.b)("p",null,"The script to be executed. May specify a non-empty string containing an executable script."),Object(b.b)("h2",{id:"ttl-after-finished"},"TTL After Finished"),Object(b.b)("p",null,"Time To Live after the job is finished in seconds. Will be removed afterwards."),Object(b.b)("h2",{id:"init-container"},"Init Container"),Object(b.b)("p",null,"Can be used to specify an init container, allowing to do preparations like checking for conditions."),Object(b.b)("h3",{id:"container-image"},"Container Image"),Object(b.b)("table",null,Object(b.b)("thead",{parentName:"table"},Object(b.b)("tr",{parentName:"thead"},Object(b.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"Setting"),Object(b.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"Description"))),Object(b.b)("tbody",{parentName:"table"},Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Repository"),Object(b.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"The full repository url of the image (i.e. ",Object(b.b)("inlineCode",{parentName:"td"},"otomi/console"),")")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Tag"),Object(b.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"The image tag (i.e. ",Object(b.b)("inlineCode",{parentName:"td"},"latest"),")")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"PullPolicy"),Object(b.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"The selected pullpolicy (i.e. ",Object(b.b)("inlineCode",{parentName:"td"},"IfNotPresent")," or ",Object(b.b)("inlineCode",{parentName:"td"},"Always"),")")))),Object(b.b)("h3",{id:"container-resources"},"Container resources"),Object(b.b)("p",null,"Please refer to ",Object(b.b)("a",Object(a.a)({parentName:"p"},{href:"https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/"}),"the kubernetes documentation")," for in depth information on how to determine the values your workload needs."),Object(b.b)("h5",{id:"requests"},"Requests"),Object(b.b)("table",null,Object(b.b)("thead",{parentName:"table"},Object(b.b)("tr",{parentName:"thead"},Object(b.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"Setting"),Object(b.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"Description"))),Object(b.b)("tbody",{parentName:"table"},Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"cpu"),Object(b.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"The guaranteed amount of CPU")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"memory"),Object(b.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"the guaranteed amount of RAM")))),Object(b.b)("h5",{id:"limits"},"Limits"),Object(b.b)("table",null,Object(b.b)("thead",{parentName:"table"},Object(b.b)("tr",{parentName:"thead"},Object(b.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"Setting"),Object(b.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"Description"))),Object(b.b)("tbody",{parentName:"table"},Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"cpu"),Object(b.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"The maximum amount of CPU")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"memory"),Object(b.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"the maximum amount of RAM")))),Object(b.b)("p",null,"NOTE: Limits are not guaranteed. If you need guaranteed resources, set higher ",Object(b.b)("a",Object(a.a)({parentName:"p"},{href:"#requests"}),"requests"),"."),Object(b.b)("h3",{id:"environment-variables"},"Environment variables"),Object(b.b)("p",null,"Provide all the needed environment variables that are needed for your container to run."),Object(b.b)("h3",{id:"secrets"},"Secrets"),Object(b.b)("p",null,"Secrets that have been created with the console can be referenced here by name. All props from the secret will be injected as env var."),Object(b.b)("h3",{id:"secret-mounts"},"Secret mounts"),Object(b.b)("p",null,"Secrets that have been created with the console can be mounted on a path. All props from the secret will be added as file on the path."),Object(b.b)("h3",{id:"files"},"Files"),Object(b.b)("p",null,"Files registered here as path > content pairs will be mounted in the container."),Object(b.b)("h3",{id:"command"},"Command"),Object(b.b)("p",null,"Override the entrypoint/command of the container."),Object(b.b)("h3",{id:"command-arguments"},"Command Arguments"),Object(b.b)("p",null,"Override the arguments given to the entrypoint/command of the container."),Object(b.b)("h2",{id:"pod-annotations"},"Pod annotations"),Object(b.b)("p",null,"Kubernetes annotations with arbitrary metadata."),Object(b.b)("h2",{id:"container-image-1"},"Container image"),Object(b.b)("table",null,Object(b.b)("thead",{parentName:"table"},Object(b.b)("tr",{parentName:"thead"},Object(b.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"Setting"),Object(b.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"Description"))),Object(b.b)("tbody",{parentName:"table"},Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Repository"),Object(b.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"The full repository url of the image (i.e. ",Object(b.b)("inlineCode",{parentName:"td"},"otomi/console"),")")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Tag"),Object(b.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"The image tag (i.e. ",Object(b.b)("inlineCode",{parentName:"td"},"latest"),")")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"PullPolicy"),Object(b.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"The selected pullpolicy (i.e. ",Object(b.b)("inlineCode",{parentName:"td"},"IfNotPresent")," or ",Object(b.b)("inlineCode",{parentName:"td"},"Always"),")")))),Object(b.b)("h2",{id:"container-resources-1"},"Container resources"),Object(b.b)("p",null,"Please refer to ",Object(b.b)("a",Object(a.a)({parentName:"p"},{href:"https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/"}),"the kubernetes documentation")," for in depth information on how to determine the values your workload needs."),Object(b.b)("h3",{id:"requests-1"},"Requests"),Object(b.b)("table",null,Object(b.b)("thead",{parentName:"table"},Object(b.b)("tr",{parentName:"thead"},Object(b.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"Setting"),Object(b.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"Description"))),Object(b.b)("tbody",{parentName:"table"},Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"cpu"),Object(b.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"The guaranteed amount of CPU")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"memory"),Object(b.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"the guaranteed amount of RAM")))),Object(b.b)("h3",{id:"limits-1"},"Limits"),Object(b.b)("table",null,Object(b.b)("thead",{parentName:"table"},Object(b.b)("tr",{parentName:"thead"},Object(b.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"Setting"),Object(b.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"Description"))),Object(b.b)("tbody",{parentName:"table"},Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"cpu"),Object(b.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"The maximum amount of CPU")),Object(b.b)("tr",{parentName:"tbody"},Object(b.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"memory"),Object(b.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"the maximum amount of RAM")))),Object(b.b)("p",null,"NOTE: Limits are not guaranteed. If you need guaranteed resources, set higher requests."),Object(b.b)("h3",{id:"environment-variables-1"},"Environment variables"),Object(b.b)("p",null,"Provide all the needed environment variables that are needed for your container to run."),Object(b.b)("h3",{id:"secrets-1"},"Secrets"),Object(b.b)("p",null,"Secrets that have been created with the console can be referenced here by name. All props from the secret will be injected as env var."),Object(b.b)("h3",{id:"secret-mounts-1"},"Secret mounts"),Object(b.b)("p",null,"Secrets that have been created with the console can be mounted on a path. All props from the secret will be added as file on the path."),Object(b.b)("h3",{id:"files-1"},"Files"),Object(b.b)("p",null,"Files registered here as path > content pairs will be mounted in the container."),Object(b.b)("h3",{id:"command-1"},"Command"),Object(b.b)("p",null,"Override the entrypoint/command of the container."),Object(b.b)("h3",{id:"command-arguments-1"},"Command Arguments"),Object(b.b)("p",null,"Override the arguments given to the entrypoint/command of the container."))}d.isMDXComponent=!0},176:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return p}));var a=n(0),r=n.n(a);function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},b=Object.keys(e);for(a=0;a<b.length;a++)n=b[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(e);for(a=0;a<b.length;a++)n=b[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var o=r.a.createContext({}),d=function(e){var t=r.a.useContext(o),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},s=function(e){var t=d(e.components);return r.a.createElement(o.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},m=r.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,b=e.originalType,c=e.parentName,o=l(e,["components","mdxType","originalType","parentName"]),s=d(n),m=a,p=s["".concat(c,".").concat(m)]||s[m]||u[m]||b;return n?r.a.createElement(p,i(i({ref:t},o),{},{components:n})):r.a.createElement(p,i({ref:t},o))}));function p(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var b=n.length,c=new Array(b);c[0]=m;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i.mdxType="string"==typeof e?e:a,c[1]=i;for(var o=2;o<b;o++)c[o]=n[o];return r.a.createElement.apply(null,c)}return r.a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},245:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/console-new-job-795f59b05a4e512a22b98cea7a8460c0.png"}}]);