<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Otomi Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Otomi Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-KKV4ZVDEKQ"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-KKV4ZVDEKQ",{})</script>
<link rel="search" type="application/opensearchdescription+xml" title="Otomi" href="/opensearch.xml"><title data-react-helmet="true">Otomi Architecture | Otomi</title><meta data-react-helmet="true" property="og:image" content="https://otomi.io/img/otomi-logo.svg"><meta data-react-helmet="true" name="twitter:image" content="https://otomi.io/img/otomi-logo.svg"><meta data-react-helmet="true" name="twitter:image:alt" content="Image for Otomi"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-about-current"><meta data-react-helmet="true" property="og:title" content="Otomi Architecture | Otomi"><meta data-react-helmet="true" name="description" content="Components"><meta data-react-helmet="true" property="og:description" content="Components"><meta data-react-helmet="true" property="og:url" content="https://otomi.io/about/architecture"><link data-react-helmet="true" rel="shortcut icon" href="/img/otomi.ico"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link data-react-helmet="true" rel="canonical" href="https://otomi.io/about/architecture"><link rel="stylesheet" href="/styles.6db9d217.css">
<link rel="preload" href="/styles.8c0b1d12.js" as="script">
<link rel="preload" href="/runtime~main.7ed55ed8.js" as="script">
<link rel="preload" href="/main.66637293.js" as="script">
<link rel="preload" href="/1.8250adb6.js" as="script">
<link rel="preload" href="/2.aab0a93e.js" as="script">
<link rel="preload" href="/101.2b167383.js" as="script">
<link rel="preload" href="/104.2507c7b1.js" as="script">
<link rel="preload" href="/7818b736.0e94f017.js" as="script">
<link rel="preload" href="/17896441.cab4857e.js" as="script">
<link rel="preload" href="/16d8d95c.5472de53.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" target="_self" href="/"><img src="/img/otomi-logo.svg" alt="Site Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/img/otomi-logo.svg" alt="Site Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/about/">About</a><a class="navbar__item navbar__link" href="/docs/installation/">Docs</a><a class="navbar__item navbar__link" href="/docs/faq">FAQ</a><a class="navbar__item navbar__link" href="/community/get-involved">Community</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/redkubes/otomi-core" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2N3Q"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3NWk">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_3NWk">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><div class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></div></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" target="_self" href="/"><img src="/img/otomi-logo.svg" alt="Site Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/img/otomi-logo.svg" alt="Site Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/about/">About</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/installation/">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/faq">FAQ</a></li><li class="menu__list-item"><a class="menu__link" href="/community/get-involved">Community</a></li><li class="menu__list-item"><a class="menu__link" href="/blog">Blog</a></li><li class="menu__list-item"><a href="https://github.com/redkubes/otomi-core" target="_blank" rel="noopener noreferrer" class="menu__link header-github-link" aria-label="GitHub repository"></a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_vMrn"><div class="docSidebarContainer_3Ak5" role="complementary"><div class="sidebar_3gvy"><div class="menu menu--responsive thin-scrollbar menu_1yIk"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_1CUI" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">About</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/about/">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/about/vision">Vision</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/about/journey">Journey</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/about/architecture">Architecture</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/about/roadmap">Roadmap</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/#appsuite">App Suite</a></li></ul></li></ul></div></div></div><main class="docMainContainer_2iGs"><div class="container padding-vert--lg docItemWrapper_1bxp"><div class="row"><div class="col docItemCol_U38p"><div class="docItemContainer_a7m4"><article><header><h1 class="docTitle_Oumm">Otomi Architecture</h1></header><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="components"></a>Components<a class="hash-link" href="#components" title="Direct link to heading">#</a></h2><p>Otomi is not a single application, but consists of multiple components. Each component has its own (GitHub) code repository, most of them public (open source), some private (for Enterprise Edition features).</p><p>The following table shows the Otomi projects and the produced artifacts.</p><table><thead><tr><th>Project</th><th>open source</th></tr></thead><tbody><tr><td><a href="https://github.com/redkubes/otomi-core" target="_blank" rel="noopener noreferrer">otomi-core</a></td><td>Yes</td></tr><tr><td><a href="https://github.com/redkubes/otomi-tasks" target="_blank" rel="noopener noreferrer">otomi-tasks</a></td><td>Yes</td></tr><tr><td><a href="https://github.com/redkubes/otomi-clients" target="_blank" rel="noopener noreferrer">otomi-clients</a></td><td>Yes</td></tr><tr><td><a href="https://github.com/redkubes/otomi-console" target="_blank" rel="noopener noreferrer">otomi-console</a></td><td>Yes</td></tr><tr><td><a href="https://github.com/redkubes/otomi-api" target="_blank" rel="noopener noreferrer">otomi-api</a></td><td>Yes</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="otomi-core"></a>Otomi Core<a class="hash-link" href="#otomi-core" title="Direct link to heading">#</a></h3><p>Otomi Core is the heart of Otomi and contains a set of about (currently) 47 Helm Charts. Most of these charts are optimized charts from open source projects, others are developed by <a href="https://redkubes.com" target="_blank" rel="noopener noreferrer">Red Kubes</a>. Otomi Core is made available (per release) as a container image. For more information, see the public repository <a href="https://github.com/redkubes/otomi-core" target="_blank" rel="noopener noreferrer">here</a> (and star ;)</p><p>Otomi Core also contains the source code for Otomi CLI and Otomi Chart.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="otomi-cli"></a>Otomi CLI<a class="hash-link" href="#otomi-cli" title="Direct link to heading">#</a></h3><p>Otomi CLI is a custom developed Command Line Interface for Otomi. Otomi CLI is part of the Otomi Core repository. At the time of writing the CLI is using bash scripts, but these are now ported to Javascript, allowing for multi platform support. Otomi CLI can be used for (advanced) initial configuration (bootstrapping), deployment, sync, push, template validation, and more.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="otomi-chart"></a>Otomi Chart<a class="hash-link" href="#otomi-chart" title="Direct link to heading">#</a></h3><p>Installing Otomi can also be done using a Helm Chart. The chart install supports setting Otomi Values as values in the chart. The Chart contains a Job that uses Otomi CLI to deploy Otomi. One benefit of using the chart install is that installation is done locally on the cluster. This limits possible issues during install when dealing with poor network connectivity between client and Kubernetes API.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="otomi-tasks"></a>Otomi Tasks<a class="hash-link" href="#otomi-tasks" title="Direct link to heading">#</a></h3><p>Otomi Tasks consists of a set of Kubernetes jobs. These jobs ensure that the configuration of applications integrated in Otomi are always equal to the desired-state configuration (see Otomi Values). An example: If a team is created via Otomi Console (in combination with Otomi API), Otomi Tasks ensures that a project is created for the new team in Harbor, the access to the project in Harbor is configured, a robot account (that can be used to push images to the project registry) is created and that a pull secret is created in the namespace of the team.</p><p>Otomi Tasks is currently used to configure the following applications:</p><ul><li>KeyCloak</li><li>Harbor</li><li>Gitea</li><li>Drone</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="otomi-clients"></a>Otomi Clients<a class="hash-link" href="#otomi-clients" title="Direct link to heading">#</a></h3><p>A factory to build and publish openapi clients used in the redkubes/otomi-tasks repo.</p><p>Otomi Clients is currently used to generate openapi clients for the following applications:</p><ul><li>KeyCloak</li><li>Harbor</li><li>Gitea</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="otomi-values"></a>Otomi Values<a class="hash-link" href="#otomi-values" title="Direct link to heading">#</a></h3><p>The charts in Otomi Core contain the default configuration values. Each cluster on which Otomi is installed also has its own configuration, the Otomi Values. These values â€‹â€‹are managed in a Git repository (Gitea), running on each cluster where Otomi is installed. The Otomi Values â€‹â€‹can be changed directly (by pulling the repository and making validated changes via Otomi CLI in combination with autocompletion in Visual Studio Code) or can be changed via the Otomi API (using Otomi Console). A commit in the values repository automatically triggers a synchronization (via a Drone pipeline). During synchronization, the Otomi Values â€‹â€‹are &#x27;injected&#x27; into the Otomi Core charts and applied to the cluster, resulting in a new state.</p><p>Otomi Values can be bootstrapped and adjusted before initial deployment of Otomi using the Otomi CLI. When deployed using the Helm Chart, Otomi Values will be automatically bootstrapped and adjusted based on the values configured in the chart.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="otomi-api"></a>Otomi API<a class="hash-link" href="#otomi-api" title="Direct link to heading">#</a></h3><p>Otomi API allows for a controlled change of all Otomi Values, based on a configuration scheme and is the brain of Otomi. Otomi API runs as a container on each cluster running.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="otomi-console"></a>Otomi Console<a class="hash-link" href="#otomi-console" title="Direct link to heading">#</a></h3><p>Otomi Console is the User Interface of Otomi. Otomi Console communicates with Otomi API for reading and changing Otomi Values configuration. Otomi Console also offers (via the Otomi Apps option) shortcuts to the UI of the various integrated applications.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="functions"></a>Functions<a class="hash-link" href="#functions" title="Direct link to heading">#</a></h2><p>Otomi offers a set of functions, built on top of the suite of integrated open source applications. All of these functions are controlled by the Otomi operation (Otomi Console, Otomi API and Otomi Core.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="teams"></a>Teams<a class="hash-link" href="#teams" title="Direct link to heading">#</a></h3><p>Teams are tenants on the platform to support Development-, DevOps teams, projects or even DTAP. A team can operate on multiple Kubernetes clusters, even when running on different Clouds.</p><p>A team will get access to Otomi Console, providing access to all the tools needed for complete observability. Container logs are only accessible for team members and traffic between services of different teams is not allowed based on network policies.</p><p>Teams can choose to receive alerts in Microsoft Teams, Slack or email and each team will automatically get access to a project in Harbor and a space in Vault (if these applications are enabled). Team Members can access all the team apps using Otomi Console with SSO.</p><p>A Team Administrator can set Team Self Service Flags to grant the team permissions to modify specific team configurations. Currently the following flags are provided:</p><ul><li>Ingress: allows the team to configure public and private ingress for a service</li><li>Alerts: allows the team to change the alerting endpoints used</li><li>OIDC: allows the team to change the OIDC group mapping for the team</li></ul><p>Teams are provided access to the team with Otomi Console based on a OIDC group mapping. When configured a Role in KeyCloak is automatically configured for the team.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="secrets"></a>Secrets<a class="hash-link" href="#secrets" title="Direct link to heading">#</a></h3><p>Secrets can be used to map and synchronize secrets stored in the local Hashicorp Vault. After a secret is created in Vault, a secret in Otomi can be created and then be used in Services and Jobs, or by custom deployments. A Secret is synchronized with Kubernetes and available as a Kubernetes secret. Otomi supports 3 kinds of secrets: 1) Generic secrets, 2) TLS secrets and 3) Docker registry (pull) secrets.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="services"></a>Services<a class="hash-link" href="#services" title="Direct link to heading">#</a></h3><p>A service in Otomi is a feature for easy deployment of container workloads using Knative Serving and exposing services with a public URL.</p><p>An Otomi Service contains 2 sections:</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="exposure"></a>Exposure<a class="hash-link" href="#exposure" title="Direct link to heading">#</a></h4><p>The exposure part of a Services enables teams to configure (advanced) ingress for a service. By default every service is configured as a clusterIP service. Ingress can be configured for private and public exposure.</p><p>When exposure is configured for a service, Otomi will automatically configure all the Kubernetes ingress resources, including Istio, certificates and DNS A-records in the selected DNS zone.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="service-type"></a>Service type<a class="hash-link" href="#service-type" title="Direct link to heading">#</a></h4><p>Ingress can be configured for 3 service types: 1) a pre-deployed Kubernetes service, 2) a pre-deployed Knative service or 3) a Knative service created by Otomi. Pre-deployed services are services deployed by the team (the team has set up a pipeline to deploy Kubernetes objects). Otomi also offers the option to create a Knative service manifest for you and deploy it. When using the New knative service option, all settings can be configured for a new knative service.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="jobs"></a>Jobs<a class="hash-link" href="#jobs" title="Direct link to heading">#</a></h3><p>Jobs can be used to create and run Kubernetes Jobs and CronJobs.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="settings"></a>Settings<a class="hash-link" href="#settings" title="Direct link to heading">#</a></h3><p>The values schema of Otomi supports a rich set of settings that can be configured using Otomi Console. The following settings sections are available:</p><ul><li>Alerts: Configure alerting settings for the customer</li><li>Customers: the name of the customer</li><li>DNS: the Domain zones available for the cluster</li><li>KMS: credential settings for retrieving encryption keys</li><li>Home: configure alerting settings to share with an organization (in case a third party monitors the cluster)</li><li>OIDC: Configure OpenID settings</li><li>Otomi: add additional Otomi clusters (so support changing context in Otomi Console), turn multi tenancy on/off, enable cloud load balancers, enable home monitored</li><li>Policies: turn security policies on/off and adjust policy configuration</li><li>SMTP: configure SMTP mail server</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="role-based-access"></a>Role based access<a class="hash-link" href="#role-based-access" title="Direct link to heading">#</a></h3><p>Otomi supports role based access control for Otomi Console and user and tenant aware applications. See KeyCloak for more information.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="integrated-applications"></a>Integrated Applications<a class="hash-link" href="#integrated-applications" title="Direct link to heading">#</a></h2><p>Otomi contains four types of applications:</p><ul><li>Core applications; applications that operate on the platform-level</li><li>Shared applications; applications that are shared between teams. Shared applications can be user- and role-aware or not (user is anonymous)</li><li>Team applications; applications with a dedicated instance per team</li><li>Optional applications; applications that can be turned on or off</li></ul><p>The following table shows all integrated applications:</p><table><thead><tr><th align="left">Application</th><th align="center">Core</th><th align="center">Shared</th><th align="center">Team</th><th align="center">User/role-aware</th><th align="center">Optional</th></tr></thead><tbody><tr><td align="left">Istio</td><td align="center">X</td><td align="center"></td><td align="center"></td><td align="center"></td><td align="center"></td></tr><tr><td align="left">Nginx Ingress Controller</td><td align="center">X</td><td align="center"></td><td align="center"></td><td align="center"></td><td align="center"></td></tr><tr><td align="left">Knative</td><td align="center">X</td><td align="center"></td><td align="center"></td><td align="center"></td><td align="center"></td></tr><tr><td align="left"><a href="/docs/apps/keycloak">KeyCloak</a></td><td align="center">X</td><td align="center"></td><td align="center"></td><td align="center">X</td><td align="center"></td></tr><tr><td align="left">Prometheus Server</td><td align="center">X</td><td align="center"></td><td align="center">X</td><td align="center"></td><td align="center"></td></tr><tr><td align="left">Prometheus kube state metrics</td><td align="center">X</td><td align="center"></td><td align="center">X</td><td align="center"></td><td align="center"></td></tr><tr><td align="left">Alertmanager</td><td align="center">X</td><td align="center"></td><td align="center">X</td><td align="center"></td><td align="center"></td></tr><tr><td align="left">Grafana/Loki</td><td align="center">X</td><td align="center">X</td><td align="center"></td><td align="center">X</td><td align="center"></td></tr><tr><td align="left"><a href="/docs/apps/gatekeeper">Gatekeeper Operator</a></td><td align="center">X</td><td align="center"></td><td align="center"></td><td align="center"></td><td align="center">X</td></tr><tr><td align="left"><a href="/docs/apps/vault">Hashicorp Vault</a></td><td align="center"></td><td align="center">X</td><td align="center"></td><td align="center">X</td><td align="center">X</td></tr><tr><td align="left"><a href="/docs/apps/harbor">Harbor</a></td><td align="center"></td><td align="center">X</td><td align="center"></td><td align="center">X</td><td align="center">X</td></tr><tr><td align="left"><a href="/docs/apps/kubeapps">Kubeapps</a></td><td align="center"></td><td align="center">X</td><td align="center"></td><td align="center"></td><td align="center">X</td></tr><tr><td align="left"><a href="/docs/apps/drone">Drone</a></td><td align="center">X</td><td align="center"></td><td align="center"></td><td align="center">X</td><td align="center">X</td></tr><tr><td align="left">Gitea</td><td align="center">X</td><td align="center"></td><td align="center"></td><td align="center">X</td><td align="center"></td></tr><tr><td align="left">Httpbin</td><td align="center"></td><td align="center">X</td><td align="center"></td><td align="center"></td><td align="center">X</td></tr><tr><td align="left">Jeager</td><td align="center">X</td><td align="center"></td><td align="center"></td><td align="center"></td><td align="center"></td></tr><tr><td align="left">Kiali</td><td align="center">X</td><td align="center"></td><td align="center"></td><td align="center"></td><td align="center"></td></tr></tbody></table><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="ingress--sso"></a>Ingress &amp; SSO<a class="hash-link" href="#ingress--sso" title="Direct link to heading">#</a></h2><p>Otomi installs and configures an advanced ingress architecture. Ingress for a service can be configured using Otomi Services. The following figure shows the ingress and SSO architecture.</p><p><img alt="img/ingress-overview" src="/assets/images/ingress-overview-419bc5e7be19dafdebd9a8ec6b04a3b1.svg"></p><p>The ingress &amp; SSO architecture explained (shortly):</p><ul><li>(optional) an external gateway is used for termination of external traffic (e.g. an Azure Application Gateway or an AWS Application Load Balancer).</li><li>2 nginx ingress controllers are deployed, one for public access and one for authenticated access</li><li>Authenticated (SSO) access is handled by an oauth2 proxy and KeyCloak. The user logs in using the Otomi custom KeyCloak login page. - KeyCloak is configured with an external IDP (optional) or uses local accounts. After authentication, KeyCloak provides a normalized JWT token. The JWT token is used by integrated core applications (providing user and role information) and team services configured with SSO</li><li>4 Istio (ingress) gateways are provisioned: 1) a public gateway for routing public (non authenticated traffic to a service, 2) an authentication gateway to route authenticated traffic to a service, 3) a local gateway (for local cluster routing), 4) a Knative gateway to route traffic to Knative services</li><li>For each service a Istio virtual service is configured</li><li>One egress gateway is provisioned for all egress traffic (network policies allow all egress traffic)</li></ul></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/redkubes/redkubes.github.io/edit/master/about/about-architecture.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2LL7"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col text--right"><em><small>Last updated on <time datetime="2021-10-01T13:56:13.000Z" class="docLastUpdatedAt_1Qna">10/1/2021</time> by <strong>Maurice Faber</strong></small></em></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/about/journey"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Our development journey</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/about/roadmap"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Roadmap Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#components" class="table-of-contents__link">Components</a><ul><li><a href="#otomi-core" class="table-of-contents__link">Otomi Core</a></li><li><a href="#otomi-cli" class="table-of-contents__link">Otomi CLI</a></li><li><a href="#otomi-chart" class="table-of-contents__link">Otomi Chart</a></li><li><a href="#otomi-tasks" class="table-of-contents__link">Otomi Tasks</a></li><li><a href="#otomi-clients" class="table-of-contents__link">Otomi Clients</a></li><li><a href="#otomi-values" class="table-of-contents__link">Otomi Values</a></li><li><a href="#otomi-api" class="table-of-contents__link">Otomi API</a></li><li><a href="#otomi-console" class="table-of-contents__link">Otomi Console</a></li></ul></li><li><a href="#functions" class="table-of-contents__link">Functions</a><ul><li><a href="#teams" class="table-of-contents__link">Teams</a></li><li><a href="#secrets" class="table-of-contents__link">Secrets</a></li><li><a href="#services" class="table-of-contents__link">Services</a></li><li><a href="#jobs" class="table-of-contents__link">Jobs</a></li><li><a href="#settings" class="table-of-contents__link">Settings</a></li><li><a href="#role-based-access" class="table-of-contents__link">Role based access</a></li></ul></li><li><a href="#integrated-applications" class="table-of-contents__link">Integrated Applications</a></li><li><a href="#ingress--sso" class="table-of-contents__link">Ingress &amp; SSO</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Otomi</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/about/">Introduction</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/installation/">Installation</a></li><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="/docs/console/">Using Otomi Console</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://join.slack.com/t/otomi/shared_invite/zt-vourf7og-de4CmvthgfJlsuDQHsK8yQ" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack</a></li><li class="footer__item"><a href="https://gitter.im/redkubes/community" target="_blank" rel="noopener noreferrer" class="footer__link-item">Gitter</a></li><li class="footer__item"><a href="https://redkubes.com/community/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Community page</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Red Kubes</h4><ul class="footer__items"><li class="footer__item"><a href="https://redkubes.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Website</a></li><li class="footer__item"><a href="https://github.com/redkubes/" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li><li class="footer__item"><a href="https://www.linkedin.com/company/red-kubes/" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn</a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img class="footer__logo" alt="Otomi Open Source Logo" src="/img/otomi-logo.svg"></div><div class="footer__copyright">Copyright Â© 2021 Red Kubes. Built with <a href="https://v2.docusaurus.io/">Docusaurus</a></div></div></div></footer></div>
<script src="/styles.8c0b1d12.js"></script>
<script src="/runtime~main.7ed55ed8.js"></script>
<script src="/main.66637293.js"></script>
<script src="/1.8250adb6.js"></script>
<script src="/2.aab0a93e.js"></script>
<script src="/101.2b167383.js"></script>
<script src="/104.2507c7b1.js"></script>
<script src="/7818b736.0e94f017.js"></script>
<script src="/17896441.cab4857e.js"></script>
<script src="/16d8d95c.5472de53.js"></script>
</body>
</html>